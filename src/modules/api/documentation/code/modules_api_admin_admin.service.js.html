<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: modules/api/admin/admin.service.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: modules/api/admin/admin.service.js</h1>






    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview This file defines and exports the `adminService` object, which contains various
 * asynchronous functions to manage admin-related operations. These functions include creating a new admin,
 * verifying an admin, resending verification emails, requesting a new password, resetting passwords,
 * logging in, and logging out. The service functions utilize models, utilities, and other services
 * to perform the necessary operations and return standardized responses.
 */

import bcrypt from 'bcrypt';

import AdminModel from './admin.model.js';
import sendResponse from '../../../utilities/sendResponse.js';
import httpStatus from '../../../constant/httpStatus.constants.js';
import validateEmail from '../../../utilities/validateEmail.js';
import generateVerificationToken from '../../../utilities/generateVerificationToken.js';
import configuration from '../../../configuration/configuration.js';
import environment from '../../../constant/envTypes.constants.js';
import prepareEmailContent from '../../../shared/prepareEmailContent.js';
import EmailService from '../../../service/email.service.js';
import prepareEmail from '../../../shared/prepareEmail.js';
import errorResponse from '../../../utilities/errorResponse.js';
import generateHashedToken from '../../../utilities/generateHashedToken.js';
import comparePassword from '../../../utilities/comparePassword.js';
import validatePassword from '../../../utilities/validatePassword.js';
import createHashedPassword from '../../../utilities/createHashedPassword.js';
import generateTempPassword from '../../../utilities/generateTempPassword.js';
import createAuthenticationToken from '../../../utilities/createAuthenticationToken.js';
import UsersModel from '../users/users.model.js';
import loggerService from '../../../service/logger.service.js';
import defaultConstants from '../../../constant/default.constants.js';
import AdminActivityLoggerModel from './adminActivityLogger/adminActivityLogger.model.js';
import adminActivityLoggerConstants from './adminActivityLogger/adminActivityLogger.constants.js';

/**
 * createNewAdmin - Asynchronously creates a new admin user. It validates the email, checks for existing admin and user accounts,
 * generates a verification token, sends a verification email, and logs the admin creation activity.
 *
 * @function
 * @async
 * @param {Object} requester - The user making the request.
 * @param {Object} adminData - The data for the new admin user.
 * @param {Object} hostData - The host data for generating links.
 * @returns {Promise&lt;Object>} - A promise that resolves to a standardized response.
 */
const createNewAdmin = async (requester, adminData, hostData) => {
    try {
        const existingAdmin = await AdminModel.findOne({
            email: adminData.email,
        }).lean();
        if (existingAdmin) {
            return sendResponse(
                {},
                'This email address is already registered. Please tell the admin to log in or use the forgot password option if needed to recover password.',
                httpStatus.CONFLICT
            );
        }

        const existingUser = await UsersModel.findOne({
            email: adminData.email,
        }).lean();
        if (existingUser) {
            return sendResponse(
                {},
                'This email address is already registered as user. Can not be a user and admin at the same time.',
                httpStatus.FORBIDDEN
            );
        }

        const emailValidationResult = await validateEmail(adminData.email);
        if (emailValidationResult !== 'Valid') {
            return sendResponse(
                {},
                emailValidationResult,
                httpStatus.BAD_REQUEST
            );
        }

        const { emailVerifyToken, emailVerifyTokenExpires, plainToken } =
            await generateVerificationToken();

        const newUser = await AdminModel.create({
            ...adminData,
            image: {
                downloadLink: defaultConstants.images.user.male,
            },
            emailVerifyToken,
            emailVerifyTokenExpires,
        });

        const subject = 'Confirm Your Email Address';
        let emailVerificationLink;
        let resendEmailVerificationLink;

        if (configuration.env === environment.PRODUCTION) {
            emailVerificationLink = `https://${hostData.hostname}/api/v1/auth/admin/verify/${plainToken}`;
            resendEmailVerificationLink = `https://${hostData.hostname}/api/v1/auth/admin/resend-verification/${newUser._id}`;
        } else {
            emailVerificationLink = `http://${hostData.hostname}:${configuration.port}/api/v1/auth/admin/verify/${plainToken}`;
            resendEmailVerificationLink = `http://${hostData.hostname}:${configuration.port}/api/v1/auth/admin/resend-verification/${newUser._id}`;
        }

        const emailData = {
            emailVerificationLink,
            resendEmailVerificationLink,
        };
        const {
            pageTitle,
            preheaderText,
            heroSection,
            mainSection,
            footerContent,
        } = prepareEmailContent(subject, emailData);

        await EmailService.sendEmail(
            adminData.email,
            subject,
            prepareEmail(
                pageTitle,
                preheaderText,
                heroSection,
                mainSection,
                footerContent
            )
        );

        await AdminActivityLoggerModel.create({
            user: requester,
            action: adminActivityLoggerConstants.actionTypes.CREATE,
            description: `${adminData.email} created successfully.`,
            details: JSON.stringify(newUser),
        });

        return sendResponse(
            newUser,
            'Admin created successfully. Please tell the admin to verify email.',
            httpStatus.CREATED
        );
    } catch (error) {
        loggerService.error(`Failed to create admin: ${error}`);

        return errorResponse(
            error.message || 'Failed to create admin.',
            httpStatus.INTERNAL_SERVER_ERROR
        );
    }
};

/**
 * verifyAdmin - Asynchronously verifies an admin user using a token. It validates the token, sets the email verified flag,
 * generates a temporary password, sends a welcome email, and returns a standardized response.
 *
 * @function
 * @async
 * @param {string} token - The verification token.
 * @param {Object} hostData - The host data for generating links.
 * @returns {Promise&lt;Object>} - A promise that resolves to a standardized response.
 */
const verifyAdmin = async (token, hostData) => {
    try {
        // Hash the plain token to compare with the stored hash
        const hashedToken = await generateHashedToken(token);
        const adminDetails = await AdminModel.findOne({
            emailVerifyToken: hashedToken,
            emailVerifyTokenExpires: { $gt: Date.now() }, // Check if the token hasn't expired
        });

        if (!adminDetails) {
            return errorResponse(
                'The verification link is invalid or has expired. Please requestBooks a new verification email.',
                httpStatus.FORBIDDEN
            );
        }

        // Set the email verified flag to true and clear the verification token fields
        adminDetails.isEmailVerified = true;
        adminDetails.emailVerifyToken = undefined;
        adminDetails.emailVerifyTokenExpires = undefined;

        // Generate a temporary password
        const tempPassword = generateTempPassword(8, 12);
        // Save the hashed temporary password and set mustChangePassword to true
        adminDetails.passwordHash = await bcrypt.hash(tempPassword, 10);
        adminDetails.mustChangePassword = true;

        const { emailVerifyToken, emailVerifyTokenExpires, plainToken } =
            await generateVerificationToken();

        // Update user with the reset password verification token and its expiry
        adminDetails.resetPasswordVerifyToken = emailVerifyToken;
        adminDetails.resetPasswordVerifyTokenExpires = emailVerifyTokenExpires;

        await adminDetails.save();

        let emailVerificationLink;

        if (configuration.env === environment.PRODUCTION) {
            emailVerificationLink = `https://${hostData.hostname}/api/v1/auth/admin/reset-password/${plainToken}`;
        } else {
            emailVerificationLink = `http://${hostData.hostname}:${configuration.port}/api/v1/auth/admin/reset-password/${plainToken}`;
        }

        const subject = 'Welcome Admin';
        const emailData = {
            userName: adminDetails.name,
            emailVerificationLink,
            tempPassword,
        };
        const {
            pageTitle,
            preheaderText,
            heroSection,
            mainSection,
            footerContent,
        } = prepareEmailContent(subject, emailData);

        await EmailService.sendEmail(
            adminDetails.email,
            subject,
            prepareEmail(
                pageTitle,
                preheaderText,
                heroSection,
                mainSection,
                footerContent
            )
        );

        return sendResponse(
            {},
            'Email has been successfully verified.',
            httpStatus.OK
        );
    } catch (error) {
        loggerService.error(`Failed to verify admin: ${error}`);

        return errorResponse(
            error.message || 'Failed to verify admin.',
            httpStatus.INTERNAL_SERVER_ERROR
        );
    }
};

/**
 * resendAdminVerification - Asynchronously resends the verification email to an admin user. It generates a new verification token,
 * updates the admin user, sends the verification email, and returns a standardized response.
 *
 * @function
 * @async
 * @param {string} adminId - The ID of the admin user.
 * @param {Object} hostData - The host data for generating links.
 * @returns {Promise&lt;Object>} - A promise that resolves to a standardized response.
 */
const resendAdminVerification = async (adminId, hostData) => {
    try {
        const adminDetails = await AdminModel.findById(adminId);
        if (!adminDetails) {
            return errorResponse('Admin not found.', httpStatus.NOT_FOUND);
        }

        if (adminDetails.isEmailVerified) {
            return errorResponse(
                'This email address has already been verified. No further action is required.',
                httpStatus.FORBIDDEN
            );
        }

        const { emailVerifyToken, emailVerifyTokenExpires, plainToken } =
            await generateVerificationToken();

        // Update the user with new verification token and expiry
        adminDetails.emailVerifyToken = emailVerifyToken;
        adminDetails.emailVerifyTokenExpires = emailVerifyTokenExpires;

        await adminDetails.save();

        const subject = 'Confirm Your Email Address';
        let emailVerificationLink;
        let resendEmailVerificationLink;

        if (configuration.env === environment.PRODUCTION) {
            emailVerificationLink = `https://${hostData.hostname}/api/v1/auth/admin/verify/${plainToken}`;
            resendEmailVerificationLink = `https://${hostData.hostname}/api/v1/auth/admin/resend-verification/${adminDetails._id}`;
        } else {
            emailVerificationLink = `http://${hostData.hostname}:${configuration.port}/api/v1/auth/admin/verify/${plainToken}`;
            resendEmailVerificationLink = `http://${hostData.hostname}:${configuration.port}/api/v1/auth/admin/resend-verification/${adminDetails._id}`;
        }

        const emailData = {
            emailVerificationLink,
            resendEmailVerificationLink,
        };
        const {
            pageTitle,
            preheaderText,
            heroSection,
            mainSection,
            footerContent,
        } = prepareEmailContent(subject, emailData);

        await EmailService.sendEmail(
            adminDetails.email,
            subject,
            prepareEmail(
                pageTitle,
                preheaderText,
                heroSection,
                mainSection,
                footerContent
            )
        );

        return sendResponse(
            {},
            'Verification email resent successfully.',
            httpStatus.OK
        );
    } catch (error) {
        loggerService.error(`Failed to resend verification: ${error}`);

        return errorResponse(
            error.message || 'Failed to resend verification.',
            httpStatus.INTERNAL_SERVER_ERROR
        );
    }
};

/**
 * requestNewAdminPassword - Asynchronously handles the request for a new admin password. It validates the email, generates
 * a verification token, updates the admin user, sends the password reset email, and returns a standardized response.
 *
 * @function
 * @async
 * @param {string} email - The email address of the admin user.
 * @param {Object} hostData - The host data for generating links.
 * @returns {Promise&lt;Object>} - A promise that resolves to a standardized response.
 */
const requestNewAdminPassword = async (email, hostData) => {
    try {
        const adminDetails = await AdminModel.findOne({
            email,
        }).lean();
        if (!adminDetails) {
            return errorResponse(
                'No account found with that email address. Please check your email address or register for a new account.',
                httpStatus.NOT_FOUND
            );
        }

        if (!adminDetails.isEmailVerified) {
            return errorResponse(
                'Your email address has not been verified yet. Please verify your email to proceed with password reset.',
                httpStatus.UNAUTHORIZED
            );
        }

        const { emailVerifyToken, emailVerifyTokenExpires, plainToken } =
            await generateVerificationToken();

        // Update user with the reset password verification token and its expiry
        await AdminModel.updateOne(
            { _id: adminDetails._id },
            {
                resetPasswordVerifyToken: emailVerifyToken,
                resetPasswordVerifyTokenExpires: emailVerifyTokenExpires,
            }
        );

        const subject = 'Reset Your Password';
        let emailVerificationLink;

        if (configuration.env === environment.PRODUCTION) {
            emailVerificationLink = `https://${hostData.hostname}/api/v1/auth/admin/reset-password/${plainToken}`;
        } else {
            emailVerificationLink = `http://${hostData.hostname}:${configuration.port}/api/v1/auth/admin/reset-password/${plainToken}`;
        }

        const emailData = {
            userName: adminDetails.name,
            resetPasswordVerificationLink: emailVerificationLink,
        };
        const {
            pageTitle,
            preheaderText,
            heroSection,
            mainSection,
            footerContent,
        } = prepareEmailContent(subject, emailData);

        await EmailService.sendEmail(
            adminDetails.email,
            subject,
            prepareEmail(
                pageTitle,
                preheaderText,
                heroSection,
                mainSection,
                footerContent
            )
        );

        return sendResponse(
            {},
            'Password reset email sent successfully. Please check your email.',
            httpStatus.OK
        );
    } catch (error) {
        loggerService.error(`Failed to request password: ${error}`);

        return errorResponse(
            error.message || 'Failed to request password.',
            httpStatus.INTERNAL_SERVER_ERROR
        );
    }
};

/**
 * resetAdminPassword - Asynchronously resets an admin password using a token. It validates the token, compares the old password,
 * validates the new password, updates the admin user, sends a success email, and returns a standardized response.
 *
 * @function
 * @async
 * @param {Object} hostData - The host data for generating links.
 * @param {string} token - The reset password token.
 * @param {Object} adminData - The data for resetting the admin password.
 * @returns {Promise&lt;Object>} - A promise that resolves to a standardized response.
 */
const resetAdminPassword = async (hostData, token, adminData) => {
    try {
        // Hash the plain token to compare with the stored hash
        const hashedToken = await generateHashedToken(token);
        const adminDetails = await AdminModel.findOne({
            resetPasswordVerifyToken: hashedToken,
            resetPasswordVerifyTokenExpires: { $gt: Date.now() }, // Check if the token hasn't expired
        });
        if (!adminDetails) {
            return errorResponse(
                'Your password reset link is invalid or has expired. Please requestBooks a new password reset link.',
                httpStatus.FORBIDDEN
            );
        }

        if (!adminDetails.passwordHash) {
            return errorResponse(
                'Please set your password first.',
                httpStatus.FORBIDDEN
            );
        }

        const isPasswordValid = await comparePassword(
            adminData.oldPassword,
            adminDetails.passwordHash
        );
        if (!isPasswordValid) {
            return errorResponse(
                'Wrong old password. Please try again.',
                httpStatus.BAD_REQUEST
            );
        }

        if (adminData.newPassword !== adminData.confirmNewPassword) {
            return errorResponse(
                'The new passwords do not match. Please try again.',
                httpStatus.BAD_REQUEST
            );
        }

        const passwordValidationResult = await validatePassword(
            adminData.newPassword
        );
        if (passwordValidationResult !== 'Valid') {
            return sendResponse(
                {},
                passwordValidationResult,
                httpStatus.BAD_REQUEST
            );
        }

        // Update the user with new password and expiry
        adminDetails.passwordHash = await createHashedPassword(
            adminData.newPassword
        );
        adminDetails.mustChangePassword = false;
        adminDetails.resetPasswordVerifyToken = undefined;
        adminDetails.resetPasswordVerifyTokenExpires = undefined;

        await adminDetails.save();

        const subject = 'Reset Password Successful';
        const emailData = {
            userName: adminDetails.name,
        };
        const {
            pageTitle,
            preheaderText,
            heroSection,
            mainSection,
            footerContent,
        } = prepareEmailContent(subject, emailData);

        await EmailService.sendEmail(
            adminDetails.email,
            subject,
            prepareEmail(
                pageTitle,
                preheaderText,
                heroSection,
                mainSection,
                footerContent
            )
        );

        return sendResponse({}, 'Reset Password Successful.', httpStatus.OK);
    } catch (error) {
        loggerService.error(`Failed to reset password. ${error}`);

        return errorResponse(
            error.message || 'Failed to reset password.',
            httpStatus.INTERNAL_SERVER_ERROR
        );
    }
};

/**
 * adminLogin - Asynchronously handles admin user login. It validates the email and password, generates an authentication token,
 * updates the admin user, sends a success email, and returns a standardized response.
 *
 * @function
 * @async
 * @param {Object} adminData - The login data for the admin user.
 * @param {Object} userAgent - The user agent data.
 * @param {Object} device - The device data.
 * @returns {Promise&lt;Object>} - A promise that resolves to a standardized response.
 */
const adminLogin = async (adminData, userAgent, device) => {
    try {
        // Consolidate multiple populate calls into a single, efficient query
        const adminDetails = await AdminModel.findOne({
            email: adminData.email,
        })
            .populate({
                path: 'designation',
                populate: {
                    path: 'permissions createdBy updatedBy',
                    select: 'name image department designation isActive',
                },
            })
            .populate(
                'createdBy updatedBy',
                'name image department designation isActive'
            )
            .lean();

        if (!adminDetails) {
            return errorResponse(
                'No account found with that email address. Please check your email address or register for a new account.',
                httpStatus.NOT_FOUND
            );
        }

        // Consolidate checks for email verification, password setup, and change requirement
        if (
            !adminDetails.isEmailVerified ||
            !adminDetails.passwordHash ||
            adminDetails.mustChangePassword
        ) {
            const messages = {
                isEmailVerified:
                    'Please verify your email address to proceed with logging in.',
                passwordHash: 'Please set your password first.',
                mustChangePassword: 'Please change your password first.',
            };
            const statusCodes = {
                isEmailVerified: httpStatus.UNAUTHORIZED,
                passwordHash: httpStatus.FORBIDDEN,
                mustChangePassword: httpStatus.FORBIDDEN,
            };

            for (const key in messages) {
                if (!adminDetails[key]) {
                    return errorResponse(messages[key], statusCodes[key]);
                }
            }
        }

        // Password validation and handling failed login attempt
        const isPasswordValid = await comparePassword(
            adminData.password,
            adminDetails?.passwordHash
        );
        if (!isPasswordValid) {
            await AdminModel.updateOne(
                { _id: adminDetails?._id },
                {
                    $push: {
                        'login.failed.device': {
                            details: userAgent,
                            dateTime: new Date(),
                        },
                    },
                }
            );

            return errorResponse(
                'Incorrect password. Please try again or use the forgot password option to reset it.',
                httpStatus.UNAUTHORIZED
            );
        }

        const designation = adminDetails?.designation?._id;
        const { token } = await createAuthenticationToken(
            adminDetails,
            designation,
            device
        );

        // Updating login success details
        await AdminModel.updateOne(
            { _id: adminDetails?._id },
            {
                $push: {
                    'login.successful.device': {
                        details: userAgent,
                        dateTime: new Date(),
                    },
                },
            }
        );

        // Prepare and send success login email
        const subject = 'Login Successfully';
        const emailData = {
            userName: adminDetails?.name,
        };
        const {
            pageTitle,
            preheaderText,
            heroSection,
            mainSection,
            footerContent,
        } = prepareEmailContent(subject, emailData);

        EmailService.sendEmail(
            adminDetails?.email,
            subject,
            prepareEmail(
                pageTitle,
                preheaderText,
                heroSection,
                mainSection,
                footerContent
            )
        );

        // Clean up sensitive data
        [
            'passwordHash',
            'emailVerifyToken',
            'emailVerifyTokenExpires',
            'phoneVerifyToken',
            'phoneVerifyTokenExpires',
            'resetPasswordVerifyToken',
            'resetPasswordVerifyTokenExpires',
        ].forEach((key) => delete adminDetails[key]);

        return sendResponse(
            { ...adminDetails, token },
            'User logged in successfully.',
            httpStatus.OK
        );
    } catch (error) {
        loggerService.error(`Failed to login: ${error}`);

        return errorResponse(
            error.message || 'Failed to login.',
            httpStatus.INTERNAL_SERVER_ERROR
        );
    }
};

/**
 * adminLogout - Asynchronously handles admin user logout. It validates the JWT token, performs logout actions,
 * and returns a standardized response.
 *
 * @function
 * @async
 * @param {Object} req - The Express request object.
 * @returns {Promise&lt;Object>} - A promise that resolves to a standardized response.
 */
const adminLogout = async (req) => {
    try {
        // Assuming these functions are well-defined and return relevant details or throw an error if something goes wrong.
        // const device = await getRequestedDeviceDetails(req);
        const jwtToken = req?.headers['authorization']
            ? req.headers['authorization'].split(' ')[1]
            : null;

        if (!jwtToken) {
            return errorResponse(
                'No authentication token provided.',
                httpStatus.UNAUTHORIZED
            );
        }

        // const tokenData = await decodeAuthenticationToken(jwtToken);

        // You might want to perform actions here such as invalidating the token.
        // Since this is a logout, we need to ensure the token is invalidated if you maintain a list of active tokens.

        return sendResponse(
            {}, // No additional data needed in the successful response.
            'You have been logged out successfully.',
            httpStatus.OK
        );
    } catch (error) {
        loggerService.error(`Failed to logout: ${error}`);

        return errorResponse(
            error.message || 'Failed to logout.',
            httpStatus.INTERNAL_SERVER_ERROR
        );
    }
};

/**
 * adminService - An object that holds various asynchronous functions for managing admin-related operations.
 * These functions perform actions such as creating a new admin, verifying an admin, resending verification
 * emails, requesting a new password, resetting passwords, logging in, and logging out.
 *
 * @typedef {Object} AdminService
 * @property {Function} createNewAdmin - Asynchronously creates a new admin user.
 * @property {Function} verifyAdmin - Asynchronously verifies an admin user using a token.
 * @property {Function} resendAdminVerification - Asynchronously resends the verification email to an admin user.
 * @property {Function} requestNewAdminPassword - Asynchronously handles the request for a new admin password.
 * @property {Function} resetAdminPassword - Asynchronously resets an admin password using a token.
 * @property {Function} adminLogin - Asynchronously handles admin user login.
 * @property {Function} adminLogout - Asynchronously handles admin user logout.
 */
const adminService = {
    createNewAdmin,
    verifyAdmin,
    resendAdminVerification,
    requestNewAdminPassword,
    resetAdminPassword,
    adminLogin,
    adminLogout,
};

export default adminService;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-accessTypesConstants.html">accessTypesConstants</a></li><li><a href="module-asyncErrorHandlerService.html">asyncErrorHandlerService</a></li><li><a href="module-constants.html">constants</a></li><li><a href="module-corsConfiguration.html">corsConfiguration</a></li><li><a href="module-defaultConstants.html">defaultConstants</a></li><li><a href="module-environment.html">environment</a></li><li><a href="module-errorHandlingService.html">errorHandlingService</a></li><li><a href="module-helmetConfiguration.html">helmetConfiguration</a></li><li><a href="module-routesConstants.html">routesConstants</a></li><li><a href="module-uploadMiddleware.html">uploadMiddleware</a></li><li><a href="module-userProfileService.html">userProfileService</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ACCEPTED">ACCEPTED</a></li><li><a href="global.html#ALREADY_REPORTED">ALREADY_REPORTED</a></li><li><a href="global.html#BAD_GATEWAY">BAD_GATEWAY</a></li><li><a href="global.html#BAD_REQUEST">BAD_REQUEST</a></li><li><a href="global.html#BMP">BMP</a></li><li><a href="global.html#CONFLICT">CONFLICT</a></li><li><a href="global.html#CONTINUE">CONTINUE</a></li><li><a href="global.html#CREATED">CREATED</a></li><li><a href="global.html#CSS">CSS</a></li><li><a href="global.html#CSV">CSV</a></li><li><a href="global.html#DIGITS">DIGITS</a></li><li><a href="global.html#EACCES">EACCES</a></li><li><a href="global.html#EADDRINUSE">EADDRINUSE</a></li><li><a href="global.html#EAGAIN">EAGAIN</a></li><li><a href="global.html#EARLY_HINTS">EARLY_HINTS</a></li><li><a href="global.html#ECONNREFUSED">ECONNREFUSED</a></li><li><a href="global.html#ECONNRESET">ECONNRESET</a></li><li><a href="global.html#EEXIST">EEXIST</a></li><li><a href="global.html#EISDIR">EISDIR</a></li><li><a href="global.html#EMAIL">EMAIL</a></li><li><a href="global.html#EMFILE">EMFILE</a></li><li><a href="global.html#ENOENT">ENOENT</a></li><li><a href="global.html#ENOTDIR">ENOTDIR</a></li><li><a href="global.html#ENOTFOUND">ENOTFOUND</a></li><li><a href="global.html#EPERM">EPERM</a></li><li><a href="global.html#EPIPE">EPIPE</a></li><li><a href="global.html#EPROTO">EPROTO</a></li><li><a href="global.html#ETIMEDOUT">ETIMEDOUT</a></li><li><a href="global.html#EWOULDBLOCK">EWOULDBLOCK</a></li><li><a href="global.html#EXPECTATION_FAILED">EXPECTATION_FAILED</a></li><li><a href="global.html#FACEBOOK_URL">FACEBOOK_URL</a></li><li><a href="global.html#FAILED_DEPENDENCY">FAILED_DEPENDENCY</a></li><li><a href="global.html#FORBIDDEN">FORBIDDEN</a></li><li><a href="global.html#FOUND">FOUND</a></li><li><a href="global.html#GATEWAY_TIMEOUT">GATEWAY_TIMEOUT</a></li><li><a href="global.html#GIF">GIF</a></li><li><a href="global.html#GITHUB_URL">GITHUB_URL</a></li><li><a href="global.html#GONE">GONE</a></li><li><a href="global.html#HTML">HTML</a></li><li><a href="global.html#HTTP_VERSION_NOT_SUPPORTED">HTTP_VERSION_NOT_SUPPORTED</a></li><li><a href="global.html#ICO">ICO</a></li><li><a href="global.html#IM_A_TEAPOT">IM_A_TEAPOT</a></li><li><a href="global.html#IM_USED">IM_USED</a></li><li><a href="global.html#INSUFFICIENT_STORAGE">INSUFFICIENT_STORAGE</a></li><li><a href="global.html#INTERNAL_SERVER_ERROR">INTERNAL_SERVER_ERROR</a></li><li><a href="global.html#ISO_8601_DATE">ISO_8601_DATE</a></li><li><a href="global.html#JPG">JPG</a></li><li><a href="global.html#JS">JS</a></li><li><a href="global.html#JSON">JSON</a></li><li><a href="global.html#LENGTH_REQUIRED">LENGTH_REQUIRED</a></li><li><a href="global.html#LINKEDIN_URL">LINKEDIN_URL</a></li><li><a href="global.html#LOCKED">LOCKED</a></li><li><a href="global.html#LOOP_DETECTED">LOOP_DETECTED</a></li><li><a href="global.html#LOWERCASE">LOWERCASE</a></li><li><a href="global.html#MD">MD</a></li><li><a href="global.html#METHOD_NOT_ALLOWED">METHOD_NOT_ALLOWED</a></li><li><a href="global.html#MISDIRECTED_REQUEST">MISDIRECTED_REQUEST</a></li><li><a href="global.html#MOBILE">MOBILE</a></li><li><a href="global.html#MOVED_PERMANENTLY">MOVED_PERMANENTLY</a></li><li><a href="global.html#MP3">MP3</a></li><li><a href="global.html#MP4">MP4</a></li><li><a href="global.html#MULTIPLE_CHOICES">MULTIPLE_CHOICES</a></li><li><a href="global.html#MULTI_STATUS">MULTI_STATUS</a></li><li><a href="global.html#NETWORK_AUTHENTICATION_REQUIRED">NETWORK_AUTHENTICATION_REQUIRED</a></li><li><a href="global.html#NON_AUTHORITATIVE_INFORMATION">NON_AUTHORITATIVE_INFORMATION</a></li><li><a href="global.html#NOT_ACCEPTABLE">NOT_ACCEPTABLE</a></li><li><a href="global.html#NOT_EXTENDED">NOT_EXTENDED</a></li><li><a href="global.html#NOT_FOUND">NOT_FOUND</a></li><li><a href="global.html#NOT_IMPLEMENTED">NOT_IMPLEMENTED</a></li><li><a href="global.html#NOT_MODIFIED">NOT_MODIFIED</a></li><li><a href="global.html#NO_CONTENT">NO_CONTENT</a></li><li><a href="global.html#OK">OK</a></li><li><a href="global.html#PARTIAL_CONTENT">PARTIAL_CONTENT</a></li><li><a href="global.html#PASSWORD">PASSWORD</a></li><li><a href="global.html#PAYLOAD_TOO_LARGE">PAYLOAD_TOO_LARGE</a></li><li><a href="global.html#PAYMENT_REQUIRED">PAYMENT_REQUIRED</a></li><li><a href="global.html#PDF">PDF</a></li><li><a href="global.html#PERMANENT_REDIRECT">PERMANENT_REDIRECT</a></li><li><a href="global.html#PNG">PNG</a></li><li><a href="global.html#PRECONDITION_FAILED">PRECONDITION_FAILED</a></li><li><a href="global.html#PRECONDITION_REQUIRED">PRECONDITION_REQUIRED</a></li><li><a href="global.html#PROCESSING">PROCESSING</a></li><li><a href="global.html#PROFILE_VISIBILITY">PROFILE_VISIBILITY</a></li><li><a href="global.html#PROXY_AUTHENTICATION_REQUIRED">PROXY_AUTHENTICATION_REQUIRED</a></li><li><a href="global.html#RANGE_NOT_SATISFIABLE">RANGE_NOT_SATISFIABLE</a></li><li><a href="global.html#RAR">RAR</a></li><li><a href="global.html#REMARKS_MAX">REMARKS_MAX</a></li><li><a href="global.html#REMARKS_MIN">REMARKS_MIN</a></li><li><a href="global.html#REQUEST_HEADER_FIELDS_TOO_LARGE">REQUEST_HEADER_FIELDS_TOO_LARGE</a></li><li><a href="global.html#REQUEST_TIMEOUT">REQUEST_TIMEOUT</a></li><li><a href="global.html#RESET_CONTENT">RESET_CONTENT</a></li><li><a href="global.html#SEE_OTHER">SEE_OTHER</a></li><li><a href="global.html#SERVICE_UNAVAILABLE">SERVICE_UNAVAILABLE</a></li><li><a href="global.html#SPECIAL_CHARACTERS">SPECIAL_CHARACTERS</a></li><li><a href="global.html#SVG">SVG</a></li><li><a href="global.html#SWITCHING_PROTOCOLS">SWITCHING_PROTOCOLS</a></li><li><a href="global.html#TEMPORARY_REDIRECT">TEMPORARY_REDIRECT</a></li><li><a href="global.html#TIFF">TIFF</a></li><li><a href="global.html#TOO_EARLY">TOO_EARLY</a></li><li><a href="global.html#TOO_MANY_REQUESTS">TOO_MANY_REQUESTS</a></li><li><a href="global.html#TWITTER_URL">TWITTER_URL</a></li><li><a href="global.html#TXT">TXT</a></li><li><a href="global.html#UNAUTHORIZED">UNAUTHORIZED</a></li><li><a href="global.html#UNAVAILABLE_FOR_LEGAL_REASONS">UNAVAILABLE_FOR_LEGAL_REASONS</a></li><li><a href="global.html#UNPROCESSABLE_ENTITY">UNPROCESSABLE_ENTITY</a></li><li><a href="global.html#UNSUPPORTED_MEDIA_TYPE">UNSUPPORTED_MEDIA_TYPE</a></li><li><a href="global.html#UPGRADE_REQUIRED">UPGRADE_REQUIRED</a></li><li><a href="global.html#UPPERCASE">UPPERCASE</a></li><li><a href="global.html#URI_TOO_LONG">URI_TOO_LONG</a></li><li><a href="global.html#URL">URL</a></li><li><a href="global.html#USE_PROXY">USE_PROXY</a></li><li><a href="global.html#VARIANT_ALSO_NEGOTIATES">VARIANT_ALSO_NEGOTIATES</a></li><li><a href="global.html#WAV">WAV</a></li><li><a href="global.html#XML">XML</a></li><li><a href="global.html#ZIP">ZIP</a></li><li><a href="global.html#actionTypes">actionTypes</a></li><li><a href="global.html#activitiesSchema">activitiesSchema</a></li><li><a href="global.html#activityType">activityType</a></li><li><a href="global.html#addressSchema">addressSchema</a></li><li><a href="global.html#adminActivityLoggerSchema">adminActivityLoggerSchema</a></li><li><a href="global.html#adminLogin">adminLogin</a></li><li><a href="global.html#adminLogout">adminLogout</a></li><li><a href="global.html#adminSchema">adminSchema</a></li><li><a href="global.html#appearanceSchema">appearanceSchema</a></li><li><a href="global.html#asyncErrorHandlerService">asyncErrorHandlerService</a></li><li><a href="global.html#authenticateMiddleware">authenticateMiddleware</a></li><li><a href="global.html#bioSchema">bioSchema</a></li><li><a href="global.html#bookIdParamSchema">bookIdParamSchema</a></li><li><a href="global.html#bookIdsParamSchema">bookIdsParamSchema</a></li><li><a href="global.html#bookSchemaBase">bookSchemaBase</a></li><li><a href="global.html#booksQueryParamSchema">booksQueryParamSchema</a></li><li><a href="global.html#booleanField">booleanField</a></li><li><a href="global.html#companySchema">companySchema</a></li><li><a href="global.html#compressionConfiguration">compressionConfiguration</a></li><li><a href="global.html#configuration">configuration</a></li><li><a href="global.html#connect">connect</a></li><li><a href="global.html#create">create</a></li><li><a href="global.html#createGenericcreationcontrollerthatcanhandlerequestswithorwithoutfileuploadsaspartofthedatapayload.">create
Generic creation controller that can handle requests with or without file uploads as part of the data payload.</a></li><li><a href="global.html#createAuthenticationToken">createAuthenticationToken</a></li><li><a href="global.html#createBookSchema">createBookSchema</a></li><li><a href="global.html#createDefaultPermissionList">createDefaultPermissionList</a></li><li><a href="global.html#createDefaultRole">createDefaultRole</a></li><li><a href="global.html#createFavouriteBook">createFavouriteBook</a></li><li><a href="global.html#createFileNameSchema">createFileNameSchema</a></li><li><a href="global.html#createHashedPassword">createHashedPassword</a></li><li><a href="global.html#createLendBook">createLendBook</a></li><li><a href="global.html#createLendBooksSchema">createLendBooksSchema</a></li><li><a href="global.html#createNewAdmin">createNewAdmin</a></li><li><a href="global.html#createNewBook">createNewBook</a></li><li><a href="global.html#createNewUserCreatesanewuserbyinvokingtheprovidedservicefunctionwithnecessaryparametersextractedfromtherequest.Utilizeshostdataandrequesteridentificationforloggingandservicecustomization.">createNewUser
Creates a new user by invoking the provided service function with necessary parameters extracted from the request.
Utilizes host data and requester identification for logging and service customization.</a></li><li><a href="global.html#createPermission">createPermission</a></li><li><a href="global.html#createPermissionSchema">createPermissionSchema</a></li><li><a href="global.html#createPronouns">createPronouns</a></li><li><a href="global.html#createPronounsSchema">createPronounsSchema</a></li><li><a href="global.html#createPublication">createPublication</a></li><li><a href="global.html#createPublicationSchema">createPublicationSchema</a></li><li><a href="global.html#createRequestBook">createRequestBook</a></li><li><a href="global.html#createRequestBookSchema">createRequestBookSchema</a></li><li><a href="global.html#createRole">createRole</a></li><li><a href="global.html#createRoleSchema">createRoleSchema</a></li><li><a href="global.html#createStringField">createStringField</a></li><li><a href="global.html#createSubject">createSubject</a></li><li><a href="global.html#createSubjectSchema">createSubjectSchema</a></li><li><a href="global.html#createWithIdCreatesaresourceassociatedwithaspecificIDprovidedintherequestparameters.Thiscontrollerisusedwhenthecreationofaresourceisdependentonanexistingentity.">createWithId
Creates a resource associated with a specific ID provided in the request parameters. This controller is used when the creation of a resource is dependent on an existing entity.</a></li><li><a href="global.html#createWriter">createWriter</a></li><li><a href="global.html#createWriterSchema">createWriterSchema</a></li><li><a href="global.html#createdByAdminSchema">createdByAdminSchema</a></li><li><a href="global.html#customObjectIdValidator">customObjectIdValidator</a></li><li><a href="global.html#dateField">dateField</a></li><li><a href="global.html#dateOfBirthSchema">dateOfBirthSchema</a></li><li><a href="global.html#decodeAuthenticationToken">decodeAuthenticationToken</a></li><li><a href="global.html#deleteAccount">deleteAccount</a></li><li><a href="global.html#deleteBookById">deleteBookById</a></li><li><a href="global.html#deleteBookList">deleteBookList</a></li><li><a href="global.html#deleteByIdDeletesaspecificresourcebyitsID,providedintherequestparameters.Thiscontrollerensuressecureandauditabledeletionprocesses.">deleteById
Deletes a specific resource by its ID, provided in the request parameters. This controller ensures secure and auditable deletion processes.</a></li><li><a href="global.html#deleteFavouriteBook">deleteFavouriteBook</a></li><li><a href="global.html#deleteFile">deleteFile</a></li><li><a href="global.html#deleteListAllowsforbulkdeletionofresourcesbasedonalistofIDsprovidedintherequestquery.Thisfunctionensuresefficientandsecuredeletionofmultipleentries.">deleteList
Allows for bulk deletion of resources based on a list of IDs provided in the request query. This function ensures efficient and secure deletion of multiple entries.</a></li><li><a href="global.html#deletePermissionById">deletePermissionById</a></li><li><a href="global.html#deletePermissionList">deletePermissionList</a></li><li><a href="global.html#deletePronounsById">deletePronounsById</a></li><li><a href="global.html#deletePronounsList">deletePronounsList</a></li><li><a href="global.html#deletePublicationById">deletePublicationById</a></li><li><a href="global.html#deletePublicationList">deletePublicationList</a></li><li><a href="global.html#deleteRequestBook">deleteRequestBook</a></li><li><a href="global.html#deleteResourceByIdDeletesasingleresourcebyID,includinganyassociatedresourcessuchasfilesstoredinGoogleDrive.Itlogstheactionandhandleserrorsappropriately,returningasuccessorerrorresponsebasedontheoutcomeoftheoperation.">deleteResourceById
Deletes a single resource by ID, including any associated resources such as files stored in Google Drive. It logs the action and
handles errors appropriately, returning a success or error response based on the outcome of the operation.</a></li><li><a href="global.html#deleteResourcesByListDeletesmultipleresourcesidentifiedbyanarrayofIDs,handlingeachdeletionindividuallyandmanagingassociatedresourceslikefiles.Itprovidesdetailedresultsofthedeletionprocess,includingcountsofdeleted,notfound,andfaileddeletions.">deleteResourcesByList
Deletes multiple resources identified by an array of IDs, handling each deletion individually and managing associated resources like files.
It provides detailed results of the deletion process, including counts of deleted, not found, and failed deletions.</a></li><li><a href="global.html#deleteRoleById">deleteRoleById</a></li><li><a href="global.html#deleteRoleByList">deleteRoleByList</a></li><li><a href="global.html#deleteSubject">deleteSubject</a></li><li><a href="global.html#deleteSubjects">deleteSubjects</a></li><li><a href="global.html#deleteUser">deleteUser</a></li><li><a href="global.html#deleteWriter">deleteWriter</a></li><li><a href="global.html#deleteWriters">deleteWriters</a></li><li><a href="global.html#detectController">detectController</a></li><li><a href="global.html#detectService">detectService</a></li><li><a href="global.html#disconnect">disconnect</a></li><li><a href="global.html#emailField">emailField</a></li><li><a href="global.html#emailSchema">emailSchema</a></li><li><a href="global.html#emailVerifyTokenExpiresSchema">emailVerifyTokenExpiresSchema</a></li><li><a href="global.html#emailVerifyTokenSchema">emailVerifyTokenSchema</a></li><li><a href="global.html#envVarsSchema">envVarsSchema</a></li><li><a href="global.html#errorResponse">errorResponse</a></li><li><a href="global.html#externalOAuthSchema">externalOAuthSchema</a></li><li><a href="global.html#facebookSchema">facebookSchema</a></li><li><a href="global.html#favouriteBookIdParamSchema">favouriteBookIdParamSchema</a></li><li><a href="global.html#fileBufferValidationSchema">fileBufferValidationSchema</a></li><li><a href="global.html#fileField">fileField</a></li><li><a href="global.html#generateExtensionRegexPattern">generateExtensionRegexPattern</a></li><li><a href="global.html#generateHashedToken">generateHashedToken</a></li><li><a href="global.html#generateTempPassword">generateTempPassword</a></li><li><a href="global.html#generateVerificationToken">generateVerificationToken</a></li><li><a href="global.html#getAccountLog">getAccountLog</a></li><li><a href="global.html#getActivityLog">getActivityLog</a></li><li><a href="global.html#getAppearance">getAppearance</a></li><li><a href="global.html#getAuthenticationToken">getAuthenticationToken</a></li><li><a href="global.html#getBookById">getBookById</a></li><li><a href="global.html#getBookHistory">getBookHistory</a></li><li><a href="global.html#getBookHistoryByBookId">getBookHistoryByBookId</a></li><li><a href="global.html#getBookList">getBookList</a></li><li><a href="global.html#getBooksHistory">getBooksHistory</a></li><li><a href="global.html#getBooksQuerySchema">getBooksQuerySchema</a></li><li><a href="global.html#getByIdFetchesaspecificresourcebyIDprovidedintherequestparameters,utilizingrequesterdataforaccesscontrolandlogging.">getById
Fetches a specific resource by ID provided in the request parameters, utilizing requester data for access control and logging.</a></li><li><a href="global.html#getByRequesterRetrievesinformationspecifictotherequesterbasedontheiridentificationinthesystem.">getByRequester
Retrieves information specific to the requester based on their identification in the system.</a></li><li><a href="global.html#getDesiredBooks">getDesiredBooks</a></li><li><a href="global.html#getDesiredBooksQuerySchema">getDesiredBooksQuerySchema</a></li><li><a href="global.html#getEnvVar">getEnvVar</a></li><li><a href="global.html#getFavouriteBooks">getFavouriteBooks</a></li><li><a href="global.html#getHostData">getHostData</a></li><li><a href="global.html#getInt">getInt</a></li><li><a href="global.html#getLendBooks">getLendBooks</a></li><li><a href="global.html#getLendBooksQuerySchema">getLendBooksQuerySchema</a></li><li><a href="global.html#getListRetrievesalistofresourcesbasedonthequeryparametersprovidedbytherequester.">getList
Retrieves a list of resources based on the query parameters provided by the requester.</a></li><li><a href="global.html#getPermissionById">getPermissionById</a></li><li><a href="global.html#getPermissionList">getPermissionList</a></li><li><a href="global.html#getPermissionsQuerySchema">getPermissionsQuerySchema</a></li><li><a href="global.html#getProfile">getProfile</a></li><li><a href="global.html#getPronounsById">getPronounsById</a></li><li><a href="global.html#getPronounsList">getPronounsList</a></li><li><a href="global.html#getPronounsQuerySchema">getPronounsQuerySchema</a></li><li><a href="global.html#getPublicationById">getPublicationById</a></li><li><a href="global.html#getPublicationList">getPublicationList</a></li><li><a href="global.html#getPublicationsQuerySchema">getPublicationsQuerySchema</a></li><li><a href="global.html#getRandomCharFromPattern">getRandomCharFromPattern</a></li><li><a href="global.html#getRequestBook">getRequestBook</a></li><li><a href="global.html#getRequestBooks">getRequestBooks</a></li><li><a href="global.html#getRequestedBooksByOwnerId">getRequestedBooksByOwnerId</a></li><li><a href="global.html#getRequestedDeviceDetails">getRequestedDeviceDetails</a></li><li><a href="global.html#getRequesterId">getRequesterId</a></li><li><a href="global.html#getRequesterPermissions">getRequesterPermissions</a></li><li><a href="global.html#getResourceByIdRetrievesasingleresourcebyitsIDfromthedatabase,applyingthespecifiedpopulatemethod.Itreturnsaformattedresponseoranerroriftheresourceisnotfound.Italsologsanyerrorthatoccursduringtheoperation.">getResourceById
Retrieves a single resource by its ID from the database, applying the specified populate method. It returns a formatted response
or an error if the resource is not found. It also logs any error that occurs during the operation.</a></li><li><a href="global.html#getResourceListRetrievesalistofresourcesbasedonprovidedparametersandquerymapping,supportingpagination,sorting,andfiltering.Itreturnsanarrayofresourcesoranotfoundmessageifnoresourcesmatchthecriteria.">getResourceList
Retrieves a list of resources based on provided parameters and query mapping, supporting pagination, sorting, and filtering.
It returns an array of resources or a not found message if no resources match the criteria.</a></li><li><a href="global.html#getRoleById">getRoleById</a></li><li><a href="global.html#getRoleList">getRoleList</a></li><li><a href="global.html#getRolesQuerySchema">getRolesQuerySchema</a></li><li><a href="global.html#getSecurityLog">getSecurityLog</a></li><li><a href="global.html#getSubjectById">getSubjectById</a></li><li><a href="global.html#getSubjects">getSubjects</a></li><li><a href="global.html#getSubjectsQuerySchema">getSubjectsQuerySchema</a></li><li><a href="global.html#getTrendingBooks">getTrendingBooks</a></li><li><a href="global.html#getWriter">getWriter</a></li><li><a href="global.html#getWriters">getWriters</a></li><li><a href="global.html#getWritersQuerySchema">getWritersQuerySchema</a></li><li><a href="global.html#githubSchema">githubSchema</a></li><li><a href="global.html#googleDriveConfiguration">googleDriveConfiguration</a></li><li><a href="global.html#handleServerError">handleServerError</a></li><li><a href="global.html#handleUncaughtException">handleUncaughtException</a></li><li><a href="global.html#handleUnhandledRejection">handleUnhandledRejection</a></li><li><a href="global.html#homeService">homeService</a></li><li><a href="global.html#hppConfiguration">hppConfiguration</a></li><li><a href="global.html#imageSchema">imageSchema</a></li><li><a href="global.html#imageSize">imageSize</a></li><li><a href="global.html#initiateGracefulShutdown">initiateGracefulShutdown</a></li><li><a href="global.html#invalidate">invalidate</a></li><li><a href="global.html#isActiveSchema">isActiveSchema</a></li><li><a href="global.html#isEmailVerifiedSchema">isEmailVerifiedSchema</a></li><li><a href="global.html#isEmpty">isEmpty</a></li><li><a href="global.html#isEmptyObject">isEmptyObject</a></li><li><a href="global.html#isMobileVerifiedSchema">isMobileVerifiedSchema</a></li><li><a href="global.html#isPrimaryEmailSchema">isPrimaryEmailSchema</a></li><li><a href="global.html#isPrimaryMobileSchema">isPrimaryMobileSchema</a></li><li><a href="global.html#lendBookSchemaBase">lendBookSchemaBase</a></li><li><a href="global.html#lengths">lengths</a></li><li><a href="global.html#linkedInSchema">linkedInSchema</a></li><li><a href="global.html#loadListFromFile">loadListFromFile</a></li><li><a href="global.html#loggerService">loggerService</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#loginManagesuserloginrequestsbyvalidatingcredentialsandgeneratingsessioninformation.Recordsdeviceandhostdataforsecurityandauditing.">login
Manages user login requests by validating credentials and generating session information. Records device and host data for security and auditing.</a></li><li><a href="global.html#loginSchema">loginSchema</a></li><li><a href="global.html#logout">logout</a></li><li><a href="global.html#logoutHandlesuserlogoutrequests,ensuringthatsessiondataisclearedandloggingoutisdonesecurely.">logout
Handles user logout requests, ensuring that session data is cleared and logging out is done securely.</a></li><li><a href="global.html#mobileField">mobileField</a></li><li><a href="global.html#mobileSchema">mobileSchema</a></li><li><a href="global.html#mobileVerifyTokenExpiresSchema">mobileVerifyTokenExpiresSchema</a></li><li><a href="global.html#mobileVerifyTokenSchema">mobileVerifyTokenSchema</a></li><li><a href="global.html#morganConfiguration">morganConfiguration</a></li><li><a href="global.html#mustChangePasswordSchema">mustChangePasswordSchema</a></li><li><a href="global.html#nameSchema">nameSchema</a></li><li><a href="global.html#numericIdSchema">numericIdSchema</a></li><li><a href="global.html#objectIdField">objectIdField</a></li><li><a href="global.html#objectIdValidator">objectIdValidator</a></li><li><a href="global.html#objectIdsField">objectIdsField</a></li><li><a href="global.html#ownerId">ownerId</a></li><li><a href="global.html#ownerIdSchema">ownerIdSchema</a></li><li><a href="global.html#passwordField">passwordField</a></li><li><a href="global.html#passwordHashSchema">passwordHashSchema</a></li><li><a href="global.html#pattern">pattern</a></li><li><a href="global.html#permissionIdParamSchema">permissionIdParamSchema</a></li><li><a href="global.html#permissionIdsParamSchema">permissionIdsParamSchema</a></li><li><a href="global.html#permissionSchema">permissionSchema</a></li><li><a href="global.html#permissionsSchema">faqsSchema</a></li><li><a href="global.html#permissionsService">faqsService</a></li><li><a href="global.html#permissionsValidator">faqsValidator</a></li><li><a href="global.html#populateBookFields">populateBookFields</a></li><li><a href="global.html#populatePermissionFields">populatePermissionFields</a></li><li><a href="global.html#populatePronounsFields">populatePronounsFields</a></li><li><a href="global.html#populatePublicationFields">populatePublicationFields</a></li><li><a href="global.html#populateRoleFields">populateRoleFields</a></li><li><a href="global.html#populateSubjectFields">populateSubjectFields</a></li><li><a href="global.html#populateWriterFields">populateWriterFields</a></li><li><a href="global.html#preSaveHook">preSaveHook</a></li><li><a href="global.html#preSaveUpdateMiddleware">preSaveUpdateMiddleware</a></li><li><a href="global.html#prepareEmailContent">prepareEmailContent</a></li><li><a href="global.html#privacySettings">privacySettings</a></li><li><a href="global.html#privacySettingsRules">privacySettingsRules</a></li><li><a href="global.html#profileVisibilitySchema">profileVisibilitySchema</a></li><li><a href="global.html#pronounsConstants">pronounsConstants</a></li><li><a href="global.html#pronounsController">pronounsController</a></li><li><a href="global.html#pronounsIdParamSchema">pronounsIdParamSchema</a></li><li><a href="global.html#pronounsIdsParamSchema">pronounsIdsParamSchema</a></li><li><a href="global.html#pronounsSchema">pronounsSchema</a></li><li><a href="global.html#pronounsSchemaBase">pronounsSchemaBase</a></li><li><a href="global.html#pronounsService">pronounsService</a></li><li><a href="global.html#pronounsValidator">pronounsValidator</a></li><li><a href="global.html#publicationIdParamSchema">publicationIdParamSchema</a></li><li><a href="global.html#publicationIdsParamSchema">publicationIdsParamSchema</a></li><li><a href="global.html#publicationSchema">publicationSchema</a></li><li><a href="global.html#publicationSchemaBase">publicationSchemaBase</a></li><li><a href="global.html#publicationsConstants">publicationsConstants</a></li><li><a href="global.html#publicationsController">publicationsController</a></li><li><a href="global.html#publicationsSchema">publicationsSchema</a></li><li><a href="global.html#publicationsService">publicationsService</a></li><li><a href="global.html#publicationsValidator">publicationsValidator</a></li><li><a href="global.html#recentlyVisitedBookSchema">recentlyVisitedBookSchema</a></li><li><a href="global.html#recentlyVisitedBooksModel">recentlyVisitedModel</a></li><li><a href="global.html#requestBookId">requestBookId</a></li><li><a href="global.html#requestBookIdSchema">requestBookIdSchema</a></li><li><a href="global.html#requestBookSchemaBase">requestBookSchemaBase</a></li><li><a href="global.html#requestBooksConstants">requestBooksConstants</a></li><li><a href="global.html#requestNewAdminPassword">requestNewAdminPassword</a></li><li><a href="global.html#requestNewPassword">requestNewPassword</a></li><li><a href="global.html#requestNewPasswordProvidesfunctionalityforuserstorequestapasswordreset.Thisfunctionextractsnecessaryinformationfromtherequestandpassesittotheservicelayer.">requestNewPassword
Provides functionality for users to request a password reset. This function extracts necessary information from the request and passes it to the service layer.</a></li><li><a href="global.html#resendAdminVerification">resendAdminVerification</a></li><li><a href="global.html#resendVerification">resendVerification</a></li><li><a href="global.html#resendVerificationAllowsuserstorequestanotherverificationemailifthefirstwasnotreceivedorexpired.">resendVerification
Allows users to request another verification email if the first was not received or expired.</a></li><li><a href="global.html#resetAdminPassword">resetAdminPassword</a></li><li><a href="global.html#resetPassword">resetPassword</a></li><li><a href="global.html#resetPasswordHandlesuserrequeststoresettheirpasswordusingatokenprovidedthroughapreviouspasswordresetrequest.">resetPassword
Handles user requests to reset their password using a token provided through a previous password reset request.</a></li><li><a href="global.html#resetPasswordVerifyTokenExpiresSchema">resetPasswordVerifyTokenExpiresSchema</a></li><li><a href="global.html#resetPasswordVerifyTokenSchema">resetPasswordVerifyTokenSchema</a></li><li><a href="global.html#returnBook">returnBook</a></li><li><a href="global.html#returnBookSchemaBase">returnBookSchemaBase</a></li><li><a href="global.html#returnBooksSchema">returnBooksSchema</a></li><li><a href="global.html#returnSchema">returnSchema</a></li><li><a href="global.html#roleIdParamSchema">roleIdParamSchema</a></li><li><a href="global.html#roleIdsParamSchema">roleIdsParamSchema</a></li><li><a href="global.html#roleSchema">roleSchema</a></li><li><a href="global.html#roleSchemaBase">roleSchemaBase</a></li><li><a href="global.html#rolesConstants">rolesConstants</a></li><li><a href="global.html#rolesController">rolesController</a></li><li><a href="global.html#rolesSchema">rolesSchema</a></li><li><a href="global.html#rolesService">rolesService</a></li><li><a href="global.html#rolesValidator">rolesValidator</a></li><li><a href="global.html#router">router</a></li><li><a href="global.html#sanitize">sanitize</a></li><li><a href="global.html#sanitizeRequestConfiguration">sanitizeRequestConfiguration</a></li><li><a href="global.html#sendEmail">sendEmail</a></li><li><a href="global.html#sendResponse">sendResponse</a></li><li><a href="global.html#sessionsSchema">sessionsSchema</a></li><li><a href="global.html#shutdownHandler">shutdownHandler</a></li><li><a href="global.html#signup">signup</a></li><li><a href="global.html#signupHandlesusersignuprequests.Extractshostdatafromtherequestandcallstheprovidedservicefunction.">signup
Handles user signup requests. Extracts host data from the request and calls the provided service function.</a></li><li><a href="global.html#statusController">statusController</a></li><li><a href="global.html#statusService">statusService</a></li><li><a href="global.html#subjectIdParamSchema">subjectIdParamSchema</a></li><li><a href="global.html#subjectIdsParamSchema">subjectIdsParamSchema</a></li><li><a href="global.html#subjectSchema">subjectSchema</a></li><li><a href="global.html#subjectSchemaBase">subjectSchemaBase</a></li><li><a href="global.html#subjectsConstants">subjectsConstants</a></li><li><a href="global.html#subjectsController">subjectsController</a></li><li><a href="global.html#subjectsSchema">subjectsSchema</a></li><li><a href="global.html#subjectsService">subjectsService</a></li><li><a href="global.html#subjectsValidator">subjectsValidator</a></li><li><a href="global.html#testUncaughtExceptionController">testUncaughtExceptionController</a></li><li><a href="global.html#toSentenceCase">toSentenceCase</a></li><li><a href="global.html#trendingBooksController">trendingBooksController</a></li><li><a href="global.html#trendingBooksService">trendingBooksService</a></li><li><a href="global.html#twitterSchema">twitterSchema</a></li><li><a href="global.html#twoFactorEnabledSchema">twoFactorEnabledSchema</a></li><li><a href="global.html#twoFactorSecretSchema">twoFactorSecretSchema</a></li><li><a href="global.html#undefinedController">undefinedController</a></li><li><a href="global.html#undefinedService">undefinedService</a></li><li><a href="global.html#uniqueConstraintErrorHandlingMiddleware">uniqueConstraintErrorHandlingMiddleware</a></li><li><a href="global.html#updateAppearance">updateAppearance</a></li><li><a href="global.html#updateBookById">updateBookById</a></li><li><a href="global.html#updateBookSchema">updateBookSchema</a></li><li><a href="global.html#updateByIdUpdatesaspecificresourcebasedonitsIDprovidedintherequestparameters,handlingcomplexupdatesincludingfileuploads.">updateById
Updates a specific resource based on its ID provided in the request parameters, handling complex updates including file uploads.</a></li><li><a href="global.html#updateByRequesterUpdatesdataspecifictotherequester,supportingupdatesthatincludefileuploads.">updateByRequester
Updates data specific to the requester, supporting updates that include file uploads.</a></li><li><a href="global.html#updatePermissionById">updatePermissionById</a></li><li><a href="global.html#updatePermissionSchema">updatePermissionSchema</a></li><li><a href="global.html#updateProfile">updateProfile</a></li><li><a href="global.html#updatePronounsById">updatePronounsById</a></li><li><a href="global.html#updatePronounsSchema">updatePronounsSchema</a></li><li><a href="global.html#updatePublicationById">updatePublicationById</a></li><li><a href="global.html#updatePublicationSchema">updatePublicationSchema</a></li><li><a href="global.html#updateRoleById">updateRoleById</a></li><li><a href="global.html#updateRoleSchema">updateRoleSchema</a></li><li><a href="global.html#updateSubject">updateSubject</a></li><li><a href="global.html#updateSubjectSchema">updateSubjectSchema</a></li><li><a href="global.html#updateUserProfile">updateUserProfile</a></li><li><a href="global.html#updateWriter">updateWriter</a></li><li><a href="global.html#updateWriterSchema">updateWriterSchema</a></li><li><a href="global.html#updatedByAdminSchema">updatedByAdminSchema</a></li><li><a href="global.html#uploadFile">uploadFile</a></li><li><a href="global.html#urlSchema">urlSchema</a></li><li><a href="global.html#userBookHistorySchema">historySchema</a></li><li><a href="global.html#userIdSchema">userIdSchema</a></li><li><a href="global.html#userProfileController">userProfileController</a></li><li><a href="global.html#userRequestBooksSchema">requestedSchema</a></li><li><a href="global.html#userSchema">userSchema</a></li><li><a href="global.html#userSchemaBase">userSchemaBase</a></li><li><a href="global.html#usernameSchema">usernameSchema</a></li><li><a href="global.html#usersSchema">usersSchema</a></li><li><a href="global.html#validateAdminRequest">validateAdminRequest</a></li><li><a href="global.html#validateEmail">validateEmail</a></li><li><a href="global.html#validateEmails">validateEmails</a></li><li><a href="global.html#validateFile">validateFile</a></li><li><a href="global.html#validateIds">validateIds</a></li><li><a href="global.html#validatePassword">validatePassword</a></li><li><a href="global.html#validatePermission">validatePermission</a></li><li><a href="global.html#validatePermissionsChecksifallthespecifiedpermissionIDsexistinthedatabase.Thisfunctionisessentialforvalidatingpermissionsaspartofaccesscontrolmechanisms.ItretrievespermissiondocumentsfromthedatabasebasedontheprovidedIDsandcomparesthecountoffoundpermissionswiththecountofrequestedIDs.">validatePermissions
Checks if all the specified permission IDs exist in the database. This function is essential for validating permissions as part of access control mechanisms.
It retrieves permission documents from the database based on the provided IDs and compares the count of found permissions with the count of requested IDs.</a></li><li><a href="global.html#validateSubjectIds">validateSubjectIds</a></li><li><a href="global.html#validateUserRequest">validateUserRequest</a></li><li><a href="global.html#validateWithSchemaAmiddlewaregeneratorfunctionthatcreatesamiddlewaretovalidatespecifiedpropertiesoftherequestobjectagainstprovidedJoischemas.ItappliescustomvalidationmessagesandallowsconfigurationofJoivalidationoptions.Ifvalidationfails,itsendsaformattederrorresponse;otherwise,itsanitizesthedatabytypeconversionandproceedstothenextmiddleware.">validateWithSchema
A middleware generator function that creates a middleware to validate specified properties of the request object against provided Joi schemas.
It applies custom validation messages and allows configuration of Joi validation options. If validation fails, it sends a formatted error response; otherwise, it sanitizes the data by type conversion and proceeds to the next middleware.</a></li><li><a href="global.html#verify">verify</a></li><li><a href="global.html#verifyProcessesuseremailverificationusingatokenprovidedintherequestparameters.Itretrieveshostdataforlogging.">verify
Processes user email verification using a token provided in the request parameters. It retrieves host data for logging.</a></li><li><a href="global.html#verifyAdmin">verifyAdmin</a></li><li><a href="global.html#verifyAuthenticationToken">verifyAuthenticationToken</a></li><li><a href="global.html#verifyJwtToken">verifyJwtToken</a></li><li><a href="global.html#writerIdParamSchema">writerIdParamSchema</a></li><li><a href="global.html#writerIdsParamSchema">writerIdsParamSchema</a></li><li><a href="global.html#writerSchema">writerSchema</a></li><li><a href="global.html#writerSchemaBase">writerSchemaBase</a></li><li><a href="global.html#writersConstants">writersConstants</a></li><li><a href="global.html#writersSchema">writersSchema</a></li><li><a href="global.html#writersValidator">writersValidator</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Fri Aug 09 2024 01:55:05 GMT+0600 (Bangladesh Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
