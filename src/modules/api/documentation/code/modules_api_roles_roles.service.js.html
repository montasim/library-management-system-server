<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: modules/api/roles/roles.service.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: modules/api/roles/roles.service.js</h1>






    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview This file defines the service functions for managing roles. These services include
 * functions for creating, retrieving, updating, and deleting roles. The services interact with the
 * Roles model and utilize various utilities for logging, response handling, and validation.
 * Additionally, functions for populating related fields and managing roles lists are provided.
 */

import validatePermissions from '../../../shared/validatePermissions.js';
import RolesModel from './roles.model.js';
import httpStatus from '../../../constant/httpStatus.constants.js';
import errorResponse from '../../../utilities/errorResponse.js';
import sendResponse from '../../../utilities/sendResponse.js';
import isEmptyObject from '../../../utilities/isEmptyObject.js';
import loggerService from '../../../service/logger.service.js';
import PermissionsModel from '../permissions/permissions.model.js';
import constants from '../../../constant/constants.js';
import AdminActivityLoggerModel from '../admin/adminActivityLogger/adminActivityLogger.model.js';
import adminActivityLoggerConstants from '../admin/adminActivityLogger/adminActivityLogger.constants.js';
import service from '../../../shared/service.js';

/**
 * populateRoleFields - A helper function to populate related fields in the role documents.
 *
 * @param {Object} query - The Mongoose query object.
 * @returns {Promise&lt;Object>} - The query result with populated fields.
 */
const populateRoleFields = async (query) => {
    return await query
        .populate({
            path: 'permissions',
            populate: [
                {
                    path: 'createdBy',
                    select: 'name image department designation isActive',
                },
                {
                    path: 'updatedBy',
                    select: 'name image department designation isActive',
                },
            ],
        })
        .populate({
            path: 'createdBy',
            select: 'name image department designation isActive',
        })
        .populate({
            path: 'updatedBy',
            select: 'name image department designation isActive',
        });
};

/**
 * createRole - Service function to create a new role. This function validates the provided permissions,
 * sets the createdBy field, and creates the role. It also logs the creation action and populates the
 * necessary fields upon creation.
 *
 * @param {Object} requester - The user creating the role.
 * @param {Object} newRoleData - The data for the new role.
 * @returns {Promise&lt;Object>} - The created role or an error response.
 */
const createRole = async (requester, newRoleData) => {
    try {
        loggerService.info('Starting role creation process.');

        // Validate permissions in the role
        loggerService.debug('Validating the permissions of the new role.');
        const arePermissionsValid = await validatePermissions(
            newRoleData.permissions
        );
        if (!arePermissionsValid) {
            loggerService.warn('Validation of permissions failed.');
            return errorResponse(
                'Invalid permissions provided.',
                httpStatus.BAD_REQUEST
            );
        }

        // Set createdBy field
        newRoleData.createdBy = requester;

        loggerService.debug(`Set createdBy to requester: ${requester}`);

        // Attempt to create the role, checking for existing role in the same operation if possible
        loggerService.debug('Attempting to create the role.');
        const newRole = await RolesModel.create(newRoleData).catch((err) => {
            if (err.code === 11000) {
                // MongoDB duplicate key error on 'name'
                loggerService.error(
                    `Duplicate role name error: ${newRoleData.name}`
                );
                return errorResponse(
                    `Role name "${newRoleData.name}" already exists.`,
                    httpStatus.BAD_REQUEST
                );
            }

            loggerService.error('Error during role creation:', err);
            throw err;
        });

        loggerService.info(`Role created successfully: ${newRole}`);

        // Populate fields immediately upon creation if supported
        loggerService.debug('Populating role fields post-creation.');
        const populatedRole = await populateRoleFields(
            RolesModel.findById(newRole._id)
        );

        // Log the creation action
        await AdminActivityLoggerModel.create({
            user: requester,
            action: adminActivityLoggerConstants.actionTypes.CREATE,
            description: 'Created a new role',
            details: JSON.stringify(populatedRole),
            affectedId: newRole._id,
        });

        // Successful response
        return sendResponse(
            populatedRole,
            'Role created successfully.',
            httpStatus.CREATED
        );
    } catch (error) {
        loggerService.error(`Failed to create role: ${error}`);

        return errorResponse(
            error.message || 'Failed to create role.',
            httpStatus.INTERNAL_SERVER_ERROR
        );
    }
};

/**
 * createDefaultRole - Service function to create or update the default role with all permissions.
 * This function fetches all permissions, upserts the default role, logs the action, and handles the response.
 *
 * @param {Object} requester - The user creating or updating the default role.
 * @returns {Promise&lt;Object>} - The created or updated default role or an error response.
 */
const createDefaultRole = async (requester) => {
    try {
        // Fetch all permissions IDs
        const allPermissions = await PermissionsModel.find({}, '_id'); // More efficient field selection
        const permissionsIds = allPermissions.map(
            (permission) => permission._id
        );

        // Upsert operation to either update the existing role or create a new one
        const updateResult = await RolesModel.updateOne(
            { name: constants.defaultName.adminRole },
            { $set: { permissions: permissionsIds, createdBy: requester } },
            { upsert: true, new: true } // Ensures that document is returned if it's an update
        );

        // Find the role to populate necessary fields
        const roleDetails = await populateRoleFields(
            RolesModel.findById(updateResult.upsertedId || updateResult._id)
        );

        // Log the creation action; this could potentially be made asynchronous if it blocks critical processing
        await AdminActivityLoggerModel.create({
            user: requester,
            action: adminActivityLoggerConstants.actionTypes.CREATE,
            description: 'Created default role',
            details: JSON.stringify(roleDetails),
            affectedId: updateResult.upsertedId || updateResult._id,
        });

        // Handling the response message based on the operation result
        const message = updateResult.upsertedCount
            ? 'Role created successfully.'
            : 'Role updated successfully.';

        return sendResponse(
            roleDetails,
            message,
            updateResult.upsertedCount ? httpStatus.CREATED : httpStatus.OK
        );
    } catch (error) {
        loggerService.error(`Failed to create or update role: ${error}`);

        return errorResponse(
            error.message || 'Failed to create or update role.',
            httpStatus.INTERNAL_SERVER_ERROR
        );
    }
};

/**
 * getRoleList - Service function to retrieve a list of roles based on provided parameters.
 * This function builds the query, fetches the roles, logs the action, and returns the paginated result.
 *
 * @param {Object} requester - The user requesting the role list.
 * @param {Object} params - The query parameters for retrieving the roles list.
 * @returns {Promise&lt;Object>} - The retrieved list of roles or an error response.
 */
const getRoleList = async (requester, params) => {
    try {
        const {
            page = 1,
            limit = 10,
            sort = '-createdAt',
            name,
            createdBy,
            updatedBy,
            createdAt,
            updatedAt,
        } = params;
        const query = {
            ...(name &amp;&amp; { name: new RegExp(name, 'i') }),
            ...(createdBy &amp;&amp; { createdBy }),
            ...(updatedBy &amp;&amp; { updatedBy }),
            ...(createdAt &amp;&amp; { createdAt }),
            ...(updatedAt &amp;&amp; { updatedAt }),
        };

        const totalRoles = await RolesModel.countDocuments(query);
        const totalPages = Math.ceil(totalRoles / limit);
        const roles = await populateRoleFields(
            RolesModel.find(query)
                .sort(sort)
                .skip((page - 1) * limit)
                .limit(limit)
        );

        // Log the fetched action; this could potentially be made asynchronous if it blocks critical processing
        await AdminActivityLoggerModel.create({
            user: requester,
            action: adminActivityLoggerConstants.actionTypes.FETCH,
            description: 'Fetched role list',
            details: JSON.stringify(roles),
        });

        if (!roles.length) {
            return sendResponse({}, 'No roles found.', httpStatus.NOT_FOUND);
        }

        return sendResponse(
            {
                roles,
                totalRoles,
                totalPages,
                currentPage: page,
                pageSize: limit,
                sort,
            },
            `${roles.length} roles fetched successfully.`,
            httpStatus.OK
        );
    } catch (error) {
        loggerService.error(`Failed to get roles: ${error}`);

        return errorResponse(
            error.message || 'Failed to get roles.',
            httpStatus.INTERNAL_SERVER_ERROR
        );
    }
};

/**
 * getRoleById - Service function to retrieve a role by its ID. This function fetches the role,
 * populates the necessary fields, logs the action, and returns the role.
 *
 * @param {Object} requester - The user requesting the role.
 * @param {String} roleId - The ID of the role to retrieve.
 * @returns {Promise&lt;Object>} - The retrieved role or an error response.
 */
const getRoleById = async (requester, roleId) => {
    try {
        const resource = await populateRoleFields(RolesModel.findById(roleId));
        if (!resource) {
            return errorResponse(`Role not found.`, httpStatus.NOT_FOUND);
        }

        // Log the fetched action; this could potentially be made asynchronous if it blocks critical processing
        await AdminActivityLoggerModel.create({
            user: requester,
            action: adminActivityLoggerConstants.actionTypes.FETCH,
            description: 'Fetched role list',
            details: JSON.stringify(resource),
        });

        return sendResponse(
            resource,
            `Role fetched successfully.`,
            httpStatus.OK
        );
    } catch (error) {
        loggerService.error(`Failed to get role: ${error}`);

        return errorResponse(
            error.message || 'Failed to get role.',
            httpStatus.INTERNAL_SERVER_ERROR
        );
    }
};

/**
 * updateRoleById - Service function to update a role by its ID. This function validates the update data,
 * sets the updatedBy field, updates the role, logs the action, and returns the updated role.
 *
 * @param {Object} requester - The user updating the role.
 * @param {String} roleId - The ID of the role to update.
 * @param {Object} updateData - The data to update the role with.
 * @returns {Promise&lt;Object>} - The updated role or an error response.
 */
const updateRoleById = async (requester, roleId, updateData) => {
    try {
        if (isEmptyObject(updateData)) {
            return errorResponse(
                'Please provide update data.',
                httpStatus.BAD_REQUEST
            );
        }

        updateData.updatedBy = requester;

        // Attempt to update the role
        const updatedRole = await RolesModel.findByIdAndUpdate(
            roleId,
            updateData,
            { new: true, runValidators: true }
        );

        if (!updatedRole) {
            return sendResponse({}, 'Role not found.', httpStatus.NOT_FOUND);
        }

        // Optionally populate if necessary (could be omitted based on requirements)
        const populatedRole = await populateRoleFields(
            RolesModel.findById(updatedRole._id)
        );

        // Log the update action
        await AdminActivityLoggerModel.create({
            user: requester,
            action: adminActivityLoggerConstants.actionTypes.UPDATE,
            description: 'Role updated',
            details: JSON.stringify(populatedRole),
            affectedId: updatedRole._id,
        });

        return sendResponse(
            populatedRole,
            'Role updated successfully.',
            httpStatus.OK
        );
    } catch (error) {
        // Handle specific errors, like duplicate names, here
        if (error.code === 11000) {
            // MongoDB duplicate key error
            return sendResponse(
                {},
                `Role name "${updateData.name}" already exists.`,
                httpStatus.BAD_REQUEST
            );
        }

        loggerService.error(`Failed to update role: ${error}`);

        return errorResponse(
            error.message || 'Failed to update role.',
            httpStatus.INTERNAL_SERVER_ERROR
        );
    }
};

/**
 * deleteRoleByList - Service function to delete a list of roles by their IDs. This function utilizes a
 * shared service to handle the deletion process.
 *
 * @param {Object} requester - The user deleting the roles.
 * @param {Array&lt;String>} roleIds - The IDs of the roles to delete.
 * @returns {Promise&lt;Object>} - The result of the deletion process or an error response.
 */
const deleteRoleByList = async (requester, roleIds) => {
    return await service.deleteResourcesByList(
        requester,
        RolesModel,
        roleIds,
        'role'
    );
};

/**
 * deleteRoleById - Service function to delete a role by its ID. This function utilizes a shared service
 * to handle the deletion process.
 *
 * @param {Object} requester - The user deleting the role.
 * @param {String} roleId - The ID of the role to delete.
 * @returns {Promise&lt;Object>} - The result of the deletion process or an error response.
 */
const deleteRoleById = async (requester, roleId) => {
    return service.deleteResourceById(requester, RolesModel, roleId, 'role');
};

/**
 * rolesService - Object containing all the defined service functions for roles management:
 *
 * - createRole: Service function to create a new role.
 * - createDefaultRole: Service function to create or update the default role with all permissions.
 * - getRoleList: Service function to retrieve a list of roles based on provided parameters.
 * - getRoleById: Service function to retrieve a role by its ID.
 * - updateRoleById: Service function to update a role by its ID.
 * - deleteRoleByList: Service function to delete a list of roles by their IDs.
 * - deleteRoleById: Service function to delete a role by its ID.
 */
const rolesService = {
    createRole,
    createDefaultRole,
    getRoleList,
    getRoleById,
    updateRoleById,
    deleteRoleByList,
    deleteRoleById,
};

export default rolesService;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-accessTypesConstants.html">accessTypesConstants</a></li><li><a href="module-asyncErrorHandlerService.html">asyncErrorHandlerService</a></li><li><a href="module-constants.html">constants</a></li><li><a href="module-corsConfiguration.html">corsConfiguration</a></li><li><a href="module-defaultConstants.html">defaultConstants</a></li><li><a href="module-environment.html">environment</a></li><li><a href="module-errorHandlingService.html">errorHandlingService</a></li><li><a href="module-helmetConfiguration.html">helmetConfiguration</a></li><li><a href="module-routesConstants.html">routesConstants</a></li><li><a href="module-uploadMiddleware.html">uploadMiddleware</a></li><li><a href="module-userProfileService.html">userProfileService</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ACCEPTED">ACCEPTED</a></li><li><a href="global.html#ALREADY_REPORTED">ALREADY_REPORTED</a></li><li><a href="global.html#BAD_GATEWAY">BAD_GATEWAY</a></li><li><a href="global.html#BAD_REQUEST">BAD_REQUEST</a></li><li><a href="global.html#BMP">BMP</a></li><li><a href="global.html#CONFLICT">CONFLICT</a></li><li><a href="global.html#CONTINUE">CONTINUE</a></li><li><a href="global.html#CREATED">CREATED</a></li><li><a href="global.html#CSS">CSS</a></li><li><a href="global.html#CSV">CSV</a></li><li><a href="global.html#DIGITS">DIGITS</a></li><li><a href="global.html#EACCES">EACCES</a></li><li><a href="global.html#EADDRINUSE">EADDRINUSE</a></li><li><a href="global.html#EAGAIN">EAGAIN</a></li><li><a href="global.html#EARLY_HINTS">EARLY_HINTS</a></li><li><a href="global.html#ECONNREFUSED">ECONNREFUSED</a></li><li><a href="global.html#ECONNRESET">ECONNRESET</a></li><li><a href="global.html#EEXIST">EEXIST</a></li><li><a href="global.html#EISDIR">EISDIR</a></li><li><a href="global.html#EMAIL">EMAIL</a></li><li><a href="global.html#EMFILE">EMFILE</a></li><li><a href="global.html#ENOENT">ENOENT</a></li><li><a href="global.html#ENOTDIR">ENOTDIR</a></li><li><a href="global.html#ENOTFOUND">ENOTFOUND</a></li><li><a href="global.html#EPERM">EPERM</a></li><li><a href="global.html#EPIPE">EPIPE</a></li><li><a href="global.html#EPROTO">EPROTO</a></li><li><a href="global.html#ETIMEDOUT">ETIMEDOUT</a></li><li><a href="global.html#EWOULDBLOCK">EWOULDBLOCK</a></li><li><a href="global.html#EXPECTATION_FAILED">EXPECTATION_FAILED</a></li><li><a href="global.html#FACEBOOK_URL">FACEBOOK_URL</a></li><li><a href="global.html#FAILED_DEPENDENCY">FAILED_DEPENDENCY</a></li><li><a href="global.html#FORBIDDEN">FORBIDDEN</a></li><li><a href="global.html#FOUND">FOUND</a></li><li><a href="global.html#GATEWAY_TIMEOUT">GATEWAY_TIMEOUT</a></li><li><a href="global.html#GIF">GIF</a></li><li><a href="global.html#GITHUB_URL">GITHUB_URL</a></li><li><a href="global.html#GONE">GONE</a></li><li><a href="global.html#HTML">HTML</a></li><li><a href="global.html#HTTP_VERSION_NOT_SUPPORTED">HTTP_VERSION_NOT_SUPPORTED</a></li><li><a href="global.html#ICO">ICO</a></li><li><a href="global.html#IM_A_TEAPOT">IM_A_TEAPOT</a></li><li><a href="global.html#IM_USED">IM_USED</a></li><li><a href="global.html#INSUFFICIENT_STORAGE">INSUFFICIENT_STORAGE</a></li><li><a href="global.html#INTERNAL_SERVER_ERROR">INTERNAL_SERVER_ERROR</a></li><li><a href="global.html#ISO_8601_DATE">ISO_8601_DATE</a></li><li><a href="global.html#JPG">JPG</a></li><li><a href="global.html#JS">JS</a></li><li><a href="global.html#JSON">JSON</a></li><li><a href="global.html#LENGTH_REQUIRED">LENGTH_REQUIRED</a></li><li><a href="global.html#LINKEDIN_URL">LINKEDIN_URL</a></li><li><a href="global.html#LOCKED">LOCKED</a></li><li><a href="global.html#LOOP_DETECTED">LOOP_DETECTED</a></li><li><a href="global.html#LOWERCASE">LOWERCASE</a></li><li><a href="global.html#MD">MD</a></li><li><a href="global.html#METHOD_NOT_ALLOWED">METHOD_NOT_ALLOWED</a></li><li><a href="global.html#MISDIRECTED_REQUEST">MISDIRECTED_REQUEST</a></li><li><a href="global.html#MOBILE">MOBILE</a></li><li><a href="global.html#MOVED_PERMANENTLY">MOVED_PERMANENTLY</a></li><li><a href="global.html#MP3">MP3</a></li><li><a href="global.html#MP4">MP4</a></li><li><a href="global.html#MULTIPLE_CHOICES">MULTIPLE_CHOICES</a></li><li><a href="global.html#MULTI_STATUS">MULTI_STATUS</a></li><li><a href="global.html#NETWORK_AUTHENTICATION_REQUIRED">NETWORK_AUTHENTICATION_REQUIRED</a></li><li><a href="global.html#NON_AUTHORITATIVE_INFORMATION">NON_AUTHORITATIVE_INFORMATION</a></li><li><a href="global.html#NOT_ACCEPTABLE">NOT_ACCEPTABLE</a></li><li><a href="global.html#NOT_EXTENDED">NOT_EXTENDED</a></li><li><a href="global.html#NOT_FOUND">NOT_FOUND</a></li><li><a href="global.html#NOT_IMPLEMENTED">NOT_IMPLEMENTED</a></li><li><a href="global.html#NOT_MODIFIED">NOT_MODIFIED</a></li><li><a href="global.html#NO_CONTENT">NO_CONTENT</a></li><li><a href="global.html#OK">OK</a></li><li><a href="global.html#PARTIAL_CONTENT">PARTIAL_CONTENT</a></li><li><a href="global.html#PASSWORD">PASSWORD</a></li><li><a href="global.html#PAYLOAD_TOO_LARGE">PAYLOAD_TOO_LARGE</a></li><li><a href="global.html#PAYMENT_REQUIRED">PAYMENT_REQUIRED</a></li><li><a href="global.html#PDF">PDF</a></li><li><a href="global.html#PERMANENT_REDIRECT">PERMANENT_REDIRECT</a></li><li><a href="global.html#PNG">PNG</a></li><li><a href="global.html#PRECONDITION_FAILED">PRECONDITION_FAILED</a></li><li><a href="global.html#PRECONDITION_REQUIRED">PRECONDITION_REQUIRED</a></li><li><a href="global.html#PROCESSING">PROCESSING</a></li><li><a href="global.html#PROFILE_VISIBILITY">PROFILE_VISIBILITY</a></li><li><a href="global.html#PROXY_AUTHENTICATION_REQUIRED">PROXY_AUTHENTICATION_REQUIRED</a></li><li><a href="global.html#RANGE_NOT_SATISFIABLE">RANGE_NOT_SATISFIABLE</a></li><li><a href="global.html#RAR">RAR</a></li><li><a href="global.html#REMARKS_MAX">REMARKS_MAX</a></li><li><a href="global.html#REMARKS_MIN">REMARKS_MIN</a></li><li><a href="global.html#REQUEST_HEADER_FIELDS_TOO_LARGE">REQUEST_HEADER_FIELDS_TOO_LARGE</a></li><li><a href="global.html#REQUEST_TIMEOUT">REQUEST_TIMEOUT</a></li><li><a href="global.html#RESET_CONTENT">RESET_CONTENT</a></li><li><a href="global.html#SEE_OTHER">SEE_OTHER</a></li><li><a href="global.html#SERVICE_UNAVAILABLE">SERVICE_UNAVAILABLE</a></li><li><a href="global.html#SPECIAL_CHARACTERS">SPECIAL_CHARACTERS</a></li><li><a href="global.html#SVG">SVG</a></li><li><a href="global.html#SWITCHING_PROTOCOLS">SWITCHING_PROTOCOLS</a></li><li><a href="global.html#TEMPORARY_REDIRECT">TEMPORARY_REDIRECT</a></li><li><a href="global.html#TIFF">TIFF</a></li><li><a href="global.html#TOO_EARLY">TOO_EARLY</a></li><li><a href="global.html#TOO_MANY_REQUESTS">TOO_MANY_REQUESTS</a></li><li><a href="global.html#TWITTER_URL">TWITTER_URL</a></li><li><a href="global.html#TXT">TXT</a></li><li><a href="global.html#UNAUTHORIZED">UNAUTHORIZED</a></li><li><a href="global.html#UNAVAILABLE_FOR_LEGAL_REASONS">UNAVAILABLE_FOR_LEGAL_REASONS</a></li><li><a href="global.html#UNPROCESSABLE_ENTITY">UNPROCESSABLE_ENTITY</a></li><li><a href="global.html#UNSUPPORTED_MEDIA_TYPE">UNSUPPORTED_MEDIA_TYPE</a></li><li><a href="global.html#UPGRADE_REQUIRED">UPGRADE_REQUIRED</a></li><li><a href="global.html#UPPERCASE">UPPERCASE</a></li><li><a href="global.html#URI_TOO_LONG">URI_TOO_LONG</a></li><li><a href="global.html#URL">URL</a></li><li><a href="global.html#USE_PROXY">USE_PROXY</a></li><li><a href="global.html#VARIANT_ALSO_NEGOTIATES">VARIANT_ALSO_NEGOTIATES</a></li><li><a href="global.html#WAV">WAV</a></li><li><a href="global.html#XML">XML</a></li><li><a href="global.html#ZIP">ZIP</a></li><li><a href="global.html#actionTypes">actionTypes</a></li><li><a href="global.html#activitiesSchema">activitiesSchema</a></li><li><a href="global.html#activityType">activityType</a></li><li><a href="global.html#addressSchema">addressSchema</a></li><li><a href="global.html#adminActivityLoggerSchema">adminActivityLoggerSchema</a></li><li><a href="global.html#adminLogin">adminLogin</a></li><li><a href="global.html#adminLogout">adminLogout</a></li><li><a href="global.html#adminSchema">adminSchema</a></li><li><a href="global.html#appearanceSchema">appearanceSchema</a></li><li><a href="global.html#asyncErrorHandlerService">asyncErrorHandlerService</a></li><li><a href="global.html#authenticateMiddleware">authenticateMiddleware</a></li><li><a href="global.html#bioSchema">bioSchema</a></li><li><a href="global.html#bookIdParamSchema">bookIdParamSchema</a></li><li><a href="global.html#bookIdsParamSchema">bookIdsParamSchema</a></li><li><a href="global.html#bookSchemaBase">bookSchemaBase</a></li><li><a href="global.html#booksQueryParamSchema">booksQueryParamSchema</a></li><li><a href="global.html#booleanField">booleanField</a></li><li><a href="global.html#companySchema">companySchema</a></li><li><a href="global.html#compressionConfiguration">compressionConfiguration</a></li><li><a href="global.html#configuration">configuration</a></li><li><a href="global.html#connect">connect</a></li><li><a href="global.html#create">create</a></li><li><a href="global.html#createGenericcreationcontrollerthatcanhandlerequestswithorwithoutfileuploadsaspartofthedatapayload.">create
Generic creation controller that can handle requests with or without file uploads as part of the data payload.</a></li><li><a href="global.html#createAuthenticationToken">createAuthenticationToken</a></li><li><a href="global.html#createBookSchema">createBookSchema</a></li><li><a href="global.html#createDefaultPermissionList">createDefaultPermissionList</a></li><li><a href="global.html#createDefaultRole">createDefaultRole</a></li><li><a href="global.html#createFavouriteBook">createFavouriteBook</a></li><li><a href="global.html#createFileNameSchema">createFileNameSchema</a></li><li><a href="global.html#createHashedPassword">createHashedPassword</a></li><li><a href="global.html#createLendBook">createLendBook</a></li><li><a href="global.html#createLendBooksSchema">createLendBooksSchema</a></li><li><a href="global.html#createNewAdmin">createNewAdmin</a></li><li><a href="global.html#createNewBook">createNewBook</a></li><li><a href="global.html#createNewUserCreatesanewuserbyinvokingtheprovidedservicefunctionwithnecessaryparametersextractedfromtherequest.Utilizeshostdataandrequesteridentificationforloggingandservicecustomization.">createNewUser
Creates a new user by invoking the provided service function with necessary parameters extracted from the request.
Utilizes host data and requester identification for logging and service customization.</a></li><li><a href="global.html#createPermission">createPermission</a></li><li><a href="global.html#createPermissionSchema">createPermissionSchema</a></li><li><a href="global.html#createPronouns">createPronouns</a></li><li><a href="global.html#createPronounsSchema">createPronounsSchema</a></li><li><a href="global.html#createPublication">createPublication</a></li><li><a href="global.html#createPublicationSchema">createPublicationSchema</a></li><li><a href="global.html#createRequestBook">createRequestBook</a></li><li><a href="global.html#createRequestBookSchema">createRequestBookSchema</a></li><li><a href="global.html#createRole">createRole</a></li><li><a href="global.html#createRoleSchema">createRoleSchema</a></li><li><a href="global.html#createStringField">createStringField</a></li><li><a href="global.html#createSubject">createSubject</a></li><li><a href="global.html#createSubjectSchema">createSubjectSchema</a></li><li><a href="global.html#createWithIdCreatesaresourceassociatedwithaspecificIDprovidedintherequestparameters.Thiscontrollerisusedwhenthecreationofaresourceisdependentonanexistingentity.">createWithId
Creates a resource associated with a specific ID provided in the request parameters. This controller is used when the creation of a resource is dependent on an existing entity.</a></li><li><a href="global.html#createWriter">createWriter</a></li><li><a href="global.html#createWriterSchema">createWriterSchema</a></li><li><a href="global.html#createdByAdminSchema">createdByAdminSchema</a></li><li><a href="global.html#customObjectIdValidator">customObjectIdValidator</a></li><li><a href="global.html#dateField">dateField</a></li><li><a href="global.html#dateOfBirthSchema">dateOfBirthSchema</a></li><li><a href="global.html#decodeAuthenticationToken">decodeAuthenticationToken</a></li><li><a href="global.html#deleteAccount">deleteAccount</a></li><li><a href="global.html#deleteBookById">deleteBookById</a></li><li><a href="global.html#deleteBookList">deleteBookList</a></li><li><a href="global.html#deleteByIdDeletesaspecificresourcebyitsID,providedintherequestparameters.Thiscontrollerensuressecureandauditabledeletionprocesses.">deleteById
Deletes a specific resource by its ID, provided in the request parameters. This controller ensures secure and auditable deletion processes.</a></li><li><a href="global.html#deleteFavouriteBook">deleteFavouriteBook</a></li><li><a href="global.html#deleteFile">deleteFile</a></li><li><a href="global.html#deleteListAllowsforbulkdeletionofresourcesbasedonalistofIDsprovidedintherequestquery.Thisfunctionensuresefficientandsecuredeletionofmultipleentries.">deleteList
Allows for bulk deletion of resources based on a list of IDs provided in the request query. This function ensures efficient and secure deletion of multiple entries.</a></li><li><a href="global.html#deletePermissionById">deletePermissionById</a></li><li><a href="global.html#deletePermissionList">deletePermissionList</a></li><li><a href="global.html#deletePronounsById">deletePronounsById</a></li><li><a href="global.html#deletePronounsList">deletePronounsList</a></li><li><a href="global.html#deletePublicationById">deletePublicationById</a></li><li><a href="global.html#deletePublicationList">deletePublicationList</a></li><li><a href="global.html#deleteRequestBook">deleteRequestBook</a></li><li><a href="global.html#deleteResourceByIdDeletesasingleresourcebyID,includinganyassociatedresourcessuchasfilesstoredinGoogleDrive.Itlogstheactionandhandleserrorsappropriately,returningasuccessorerrorresponsebasedontheoutcomeoftheoperation.">deleteResourceById
Deletes a single resource by ID, including any associated resources such as files stored in Google Drive. It logs the action and
handles errors appropriately, returning a success or error response based on the outcome of the operation.</a></li><li><a href="global.html#deleteResourcesByListDeletesmultipleresourcesidentifiedbyanarrayofIDs,handlingeachdeletionindividuallyandmanagingassociatedresourceslikefiles.Itprovidesdetailedresultsofthedeletionprocess,includingcountsofdeleted,notfound,andfaileddeletions.">deleteResourcesByList
Deletes multiple resources identified by an array of IDs, handling each deletion individually and managing associated resources like files.
It provides detailed results of the deletion process, including counts of deleted, not found, and failed deletions.</a></li><li><a href="global.html#deleteRoleById">deleteRoleById</a></li><li><a href="global.html#deleteRoleByList">deleteRoleByList</a></li><li><a href="global.html#deleteSubject">deleteSubject</a></li><li><a href="global.html#deleteSubjects">deleteSubjects</a></li><li><a href="global.html#deleteUser">deleteUser</a></li><li><a href="global.html#deleteWriter">deleteWriter</a></li><li><a href="global.html#deleteWriters">deleteWriters</a></li><li><a href="global.html#detectController">detectController</a></li><li><a href="global.html#detectService">detectService</a></li><li><a href="global.html#disconnect">disconnect</a></li><li><a href="global.html#emailField">emailField</a></li><li><a href="global.html#emailSchema">emailSchema</a></li><li><a href="global.html#emailVerifyTokenExpiresSchema">emailVerifyTokenExpiresSchema</a></li><li><a href="global.html#emailVerifyTokenSchema">emailVerifyTokenSchema</a></li><li><a href="global.html#envVarsSchema">envVarsSchema</a></li><li><a href="global.html#errorResponse">errorResponse</a></li><li><a href="global.html#externalOAuthSchema">externalOAuthSchema</a></li><li><a href="global.html#facebookSchema">facebookSchema</a></li><li><a href="global.html#favouriteBookIdParamSchema">favouriteBookIdParamSchema</a></li><li><a href="global.html#fileBufferValidationSchema">fileBufferValidationSchema</a></li><li><a href="global.html#fileField">fileField</a></li><li><a href="global.html#generateExtensionRegexPattern">generateExtensionRegexPattern</a></li><li><a href="global.html#generateHashedToken">generateHashedToken</a></li><li><a href="global.html#generateTempPassword">generateTempPassword</a></li><li><a href="global.html#generateVerificationToken">generateVerificationToken</a></li><li><a href="global.html#getAccountLog">getAccountLog</a></li><li><a href="global.html#getActivityLog">getActivityLog</a></li><li><a href="global.html#getAppearance">getAppearance</a></li><li><a href="global.html#getAuthenticationToken">getAuthenticationToken</a></li><li><a href="global.html#getBookById">getBookById</a></li><li><a href="global.html#getBookHistory">getBookHistory</a></li><li><a href="global.html#getBookHistoryByBookId">getBookHistoryByBookId</a></li><li><a href="global.html#getBookList">getBookList</a></li><li><a href="global.html#getBooksHistory">getBooksHistory</a></li><li><a href="global.html#getBooksQuerySchema">getBooksQuerySchema</a></li><li><a href="global.html#getByIdFetchesaspecificresourcebyIDprovidedintherequestparameters,utilizingrequesterdataforaccesscontrolandlogging.">getById
Fetches a specific resource by ID provided in the request parameters, utilizing requester data for access control and logging.</a></li><li><a href="global.html#getByRequesterRetrievesinformationspecifictotherequesterbasedontheiridentificationinthesystem.">getByRequester
Retrieves information specific to the requester based on their identification in the system.</a></li><li><a href="global.html#getDesiredBooks">getDesiredBooks</a></li><li><a href="global.html#getDesiredBooksQuerySchema">getDesiredBooksQuerySchema</a></li><li><a href="global.html#getEnvVar">getEnvVar</a></li><li><a href="global.html#getFavouriteBooks">getFavouriteBooks</a></li><li><a href="global.html#getHostData">getHostData</a></li><li><a href="global.html#getInt">getInt</a></li><li><a href="global.html#getLendBooks">getLendBooks</a></li><li><a href="global.html#getLendBooksQuerySchema">getLendBooksQuerySchema</a></li><li><a href="global.html#getListRetrievesalistofresourcesbasedonthequeryparametersprovidedbytherequester.">getList
Retrieves a list of resources based on the query parameters provided by the requester.</a></li><li><a href="global.html#getPermissionById">getPermissionById</a></li><li><a href="global.html#getPermissionList">getPermissionList</a></li><li><a href="global.html#getPermissionsQuerySchema">getPermissionsQuerySchema</a></li><li><a href="global.html#getProfile">getProfile</a></li><li><a href="global.html#getPronounsById">getPronounsById</a></li><li><a href="global.html#getPronounsList">getPronounsList</a></li><li><a href="global.html#getPronounsQuerySchema">getPronounsQuerySchema</a></li><li><a href="global.html#getPublicationById">getPublicationById</a></li><li><a href="global.html#getPublicationList">getPublicationList</a></li><li><a href="global.html#getPublicationsQuerySchema">getPublicationsQuerySchema</a></li><li><a href="global.html#getRandomCharFromPattern">getRandomCharFromPattern</a></li><li><a href="global.html#getRequestBook">getRequestBook</a></li><li><a href="global.html#getRequestBooks">getRequestBooks</a></li><li><a href="global.html#getRequestedBooksByOwnerId">getRequestedBooksByOwnerId</a></li><li><a href="global.html#getRequestedDeviceDetails">getRequestedDeviceDetails</a></li><li><a href="global.html#getRequesterId">getRequesterId</a></li><li><a href="global.html#getRequesterPermissions">getRequesterPermissions</a></li><li><a href="global.html#getResourceByIdRetrievesasingleresourcebyitsIDfromthedatabase,applyingthespecifiedpopulatemethod.Itreturnsaformattedresponseoranerroriftheresourceisnotfound.Italsologsanyerrorthatoccursduringtheoperation.">getResourceById
Retrieves a single resource by its ID from the database, applying the specified populate method. It returns a formatted response
or an error if the resource is not found. It also logs any error that occurs during the operation.</a></li><li><a href="global.html#getResourceListRetrievesalistofresourcesbasedonprovidedparametersandquerymapping,supportingpagination,sorting,andfiltering.Itreturnsanarrayofresourcesoranotfoundmessageifnoresourcesmatchthecriteria.">getResourceList
Retrieves a list of resources based on provided parameters and query mapping, supporting pagination, sorting, and filtering.
It returns an array of resources or a not found message if no resources match the criteria.</a></li><li><a href="global.html#getRoleById">getRoleById</a></li><li><a href="global.html#getRoleList">getRoleList</a></li><li><a href="global.html#getRolesQuerySchema">getRolesQuerySchema</a></li><li><a href="global.html#getSecurityLog">getSecurityLog</a></li><li><a href="global.html#getSubjectById">getSubjectById</a></li><li><a href="global.html#getSubjects">getSubjects</a></li><li><a href="global.html#getSubjectsQuerySchema">getSubjectsQuerySchema</a></li><li><a href="global.html#getTrendingBooks">getTrendingBooks</a></li><li><a href="global.html#getWriter">getWriter</a></li><li><a href="global.html#getWriters">getWriters</a></li><li><a href="global.html#getWritersQuerySchema">getWritersQuerySchema</a></li><li><a href="global.html#githubSchema">githubSchema</a></li><li><a href="global.html#googleDriveConfiguration">googleDriveConfiguration</a></li><li><a href="global.html#handleServerError">handleServerError</a></li><li><a href="global.html#handleUncaughtException">handleUncaughtException</a></li><li><a href="global.html#handleUnhandledRejection">handleUnhandledRejection</a></li><li><a href="global.html#homeService">homeService</a></li><li><a href="global.html#hppConfiguration">hppConfiguration</a></li><li><a href="global.html#imageSchema">imageSchema</a></li><li><a href="global.html#imageSize">imageSize</a></li><li><a href="global.html#initiateGracefulShutdown">initiateGracefulShutdown</a></li><li><a href="global.html#invalidate">invalidate</a></li><li><a href="global.html#isActiveSchema">isActiveSchema</a></li><li><a href="global.html#isEmailVerifiedSchema">isEmailVerifiedSchema</a></li><li><a href="global.html#isEmpty">isEmpty</a></li><li><a href="global.html#isEmptyObject">isEmptyObject</a></li><li><a href="global.html#isMobileVerifiedSchema">isMobileVerifiedSchema</a></li><li><a href="global.html#isPrimaryEmailSchema">isPrimaryEmailSchema</a></li><li><a href="global.html#isPrimaryMobileSchema">isPrimaryMobileSchema</a></li><li><a href="global.html#lendBookSchemaBase">lendBookSchemaBase</a></li><li><a href="global.html#lengths">lengths</a></li><li><a href="global.html#linkedInSchema">linkedInSchema</a></li><li><a href="global.html#loadListFromFile">loadListFromFile</a></li><li><a href="global.html#loggerService">loggerService</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#loginManagesuserloginrequestsbyvalidatingcredentialsandgeneratingsessioninformation.Recordsdeviceandhostdataforsecurityandauditing.">login
Manages user login requests by validating credentials and generating session information. Records device and host data for security and auditing.</a></li><li><a href="global.html#loginSchema">loginSchema</a></li><li><a href="global.html#logout">logout</a></li><li><a href="global.html#logoutHandlesuserlogoutrequests,ensuringthatsessiondataisclearedandloggingoutisdonesecurely.">logout
Handles user logout requests, ensuring that session data is cleared and logging out is done securely.</a></li><li><a href="global.html#mobileField">mobileField</a></li><li><a href="global.html#mobileSchema">mobileSchema</a></li><li><a href="global.html#mobileVerifyTokenExpiresSchema">mobileVerifyTokenExpiresSchema</a></li><li><a href="global.html#mobileVerifyTokenSchema">mobileVerifyTokenSchema</a></li><li><a href="global.html#morganConfiguration">morganConfiguration</a></li><li><a href="global.html#mustChangePasswordSchema">mustChangePasswordSchema</a></li><li><a href="global.html#nameSchema">nameSchema</a></li><li><a href="global.html#numericIdSchema">numericIdSchema</a></li><li><a href="global.html#objectIdField">objectIdField</a></li><li><a href="global.html#objectIdValidator">objectIdValidator</a></li><li><a href="global.html#objectIdsField">objectIdsField</a></li><li><a href="global.html#ownerId">ownerId</a></li><li><a href="global.html#ownerIdSchema">ownerIdSchema</a></li><li><a href="global.html#passwordField">passwordField</a></li><li><a href="global.html#passwordHashSchema">passwordHashSchema</a></li><li><a href="global.html#pattern">pattern</a></li><li><a href="global.html#permissionIdParamSchema">permissionIdParamSchema</a></li><li><a href="global.html#permissionIdsParamSchema">permissionIdsParamSchema</a></li><li><a href="global.html#permissionSchema">permissionSchema</a></li><li><a href="global.html#permissionsSchema">permissionsSchema</a></li><li><a href="global.html#permissionsService">permissionsService</a></li><li><a href="global.html#permissionsValidator">permissionsValidator</a></li><li><a href="global.html#populateBookFields">populateBookFields</a></li><li><a href="global.html#populatePermissionFields">populatePermissionFields</a></li><li><a href="global.html#populatePronounsFields">populatePronounsFields</a></li><li><a href="global.html#populatePublicationFields">populatePublicationFields</a></li><li><a href="global.html#populateRoleFields">populateRoleFields</a></li><li><a href="global.html#populateSubjectFields">populateSubjectFields</a></li><li><a href="global.html#populateWriterFields">populateWriterFields</a></li><li><a href="global.html#preSaveHook">preSaveHook</a></li><li><a href="global.html#preSaveUpdateMiddleware">preSaveUpdateMiddleware</a></li><li><a href="global.html#prepareEmailContent">prepareEmailContent</a></li><li><a href="global.html#privacySettings">privacySettings</a></li><li><a href="global.html#privacySettingsRules">privacySettingsRules</a></li><li><a href="global.html#profileVisibilitySchema">profileVisibilitySchema</a></li><li><a href="global.html#pronounsConstants">pronounsConstants</a></li><li><a href="global.html#pronounsController">pronounsController</a></li><li><a href="global.html#pronounsIdParamSchema">pronounsIdParamSchema</a></li><li><a href="global.html#pronounsIdsParamSchema">pronounsIdsParamSchema</a></li><li><a href="global.html#pronounsSchema">pronounsSchema</a></li><li><a href="global.html#pronounsSchemaBase">pronounsSchemaBase</a></li><li><a href="global.html#pronounsService">pronounsService</a></li><li><a href="global.html#pronounsValidator">pronounsValidator</a></li><li><a href="global.html#publicationIdParamSchema">publicationIdParamSchema</a></li><li><a href="global.html#publicationIdsParamSchema">publicationIdsParamSchema</a></li><li><a href="global.html#publicationSchema">publicationSchema</a></li><li><a href="global.html#publicationSchemaBase">publicationSchemaBase</a></li><li><a href="global.html#publicationsConstants">publicationsConstants</a></li><li><a href="global.html#publicationsController">publicationsController</a></li><li><a href="global.html#publicationsSchema">publicationsSchema</a></li><li><a href="global.html#publicationsService">publicationsService</a></li><li><a href="global.html#publicationsValidator">publicationsValidator</a></li><li><a href="global.html#recentlyVisitedBookSchema">recentlyVisitedBookSchema</a></li><li><a href="global.html#recentlyVisitedBooksModel">recentlyVisitedModel</a></li><li><a href="global.html#requestBookId">requestBookId</a></li><li><a href="global.html#requestBookIdSchema">requestBookIdSchema</a></li><li><a href="global.html#requestBookSchemaBase">requestBookSchemaBase</a></li><li><a href="global.html#requestBooksConstants">requestBooksConstants</a></li><li><a href="global.html#requestNewAdminPassword">requestNewAdminPassword</a></li><li><a href="global.html#requestNewPassword">requestNewPassword</a></li><li><a href="global.html#requestNewPasswordProvidesfunctionalityforuserstorequestapasswordreset.Thisfunctionextractsnecessaryinformationfromtherequestandpassesittotheservicelayer.">requestNewPassword
Provides functionality for users to request a password reset. This function extracts necessary information from the request and passes it to the service layer.</a></li><li><a href="global.html#resendAdminVerification">resendAdminVerification</a></li><li><a href="global.html#resendVerification">resendVerification</a></li><li><a href="global.html#resendVerificationAllowsuserstorequestanotherverificationemailifthefirstwasnotreceivedorexpired.">resendVerification
Allows users to request another verification email if the first was not received or expired.</a></li><li><a href="global.html#resetAdminPassword">resetAdminPassword</a></li><li><a href="global.html#resetPassword">resetPassword</a></li><li><a href="global.html#resetPasswordHandlesuserrequeststoresettheirpasswordusingatokenprovidedthroughapreviouspasswordresetrequest.">resetPassword
Handles user requests to reset their password using a token provided through a previous password reset request.</a></li><li><a href="global.html#resetPasswordVerifyTokenExpiresSchema">resetPasswordVerifyTokenExpiresSchema</a></li><li><a href="global.html#resetPasswordVerifyTokenSchema">resetPasswordVerifyTokenSchema</a></li><li><a href="global.html#returnBook">returnBook</a></li><li><a href="global.html#returnBookSchemaBase">returnBookSchemaBase</a></li><li><a href="global.html#returnBooksSchema">returnBooksSchema</a></li><li><a href="global.html#returnSchema">returnSchema</a></li><li><a href="global.html#roleIdParamSchema">roleIdParamSchema</a></li><li><a href="global.html#roleIdsParamSchema">roleIdsParamSchema</a></li><li><a href="global.html#roleSchema">roleSchema</a></li><li><a href="global.html#roleSchemaBase">roleSchemaBase</a></li><li><a href="global.html#rolesConstants">rolesConstants</a></li><li><a href="global.html#rolesController">rolesController</a></li><li><a href="global.html#rolesSchema">rolesSchema</a></li><li><a href="global.html#rolesService">rolesService</a></li><li><a href="global.html#rolesValidator">rolesValidator</a></li><li><a href="global.html#router">router</a></li><li><a href="global.html#sanitize">sanitize</a></li><li><a href="global.html#sanitizeRequestConfiguration">sanitizeRequestConfiguration</a></li><li><a href="global.html#sendEmail">sendEmail</a></li><li><a href="global.html#sendResponse">sendResponse</a></li><li><a href="global.html#sessionsSchema">sessionsSchema</a></li><li><a href="global.html#shutdownHandler">shutdownHandler</a></li><li><a href="global.html#signup">signup</a></li><li><a href="global.html#signupHandlesusersignuprequests.Extractshostdatafromtherequestandcallstheprovidedservicefunction.">signup
Handles user signup requests. Extracts host data from the request and calls the provided service function.</a></li><li><a href="global.html#statusController">statusController</a></li><li><a href="global.html#statusService">statusService</a></li><li><a href="global.html#subjectIdParamSchema">subjectIdParamSchema</a></li><li><a href="global.html#subjectIdsParamSchema">subjectIdsParamSchema</a></li><li><a href="global.html#subjectSchema">subjectSchema</a></li><li><a href="global.html#subjectSchemaBase">subjectSchemaBase</a></li><li><a href="global.html#subjectsConstants">subjectsConstants</a></li><li><a href="global.html#subjectsController">subjectsController</a></li><li><a href="global.html#subjectsSchema">subjectsSchema</a></li><li><a href="global.html#subjectsService">subjectsService</a></li><li><a href="global.html#subjectsValidator">subjectsValidator</a></li><li><a href="global.html#testUncaughtExceptionController">testUncaughtExceptionController</a></li><li><a href="global.html#toSentenceCase">toSentenceCase</a></li><li><a href="global.html#trendingBooksController">trendingBooksController</a></li><li><a href="global.html#trendingBooksService">trendingBooksService</a></li><li><a href="global.html#twitterSchema">twitterSchema</a></li><li><a href="global.html#twoFactorEnabledSchema">twoFactorEnabledSchema</a></li><li><a href="global.html#twoFactorSecretSchema">twoFactorSecretSchema</a></li><li><a href="global.html#undefinedController">undefinedController</a></li><li><a href="global.html#undefinedService">undefinedService</a></li><li><a href="global.html#uniqueConstraintErrorHandlingMiddleware">uniqueConstraintErrorHandlingMiddleware</a></li><li><a href="global.html#updateAppearance">updateAppearance</a></li><li><a href="global.html#updateBookById">updateBookById</a></li><li><a href="global.html#updateBookSchema">updateBookSchema</a></li><li><a href="global.html#updateByIdUpdatesaspecificresourcebasedonitsIDprovidedintherequestparameters,handlingcomplexupdatesincludingfileuploads.">updateById
Updates a specific resource based on its ID provided in the request parameters, handling complex updates including file uploads.</a></li><li><a href="global.html#updateByRequesterUpdatesdataspecifictotherequester,supportingupdatesthatincludefileuploads.">updateByRequester
Updates data specific to the requester, supporting updates that include file uploads.</a></li><li><a href="global.html#updatePermissionById">updatePermissionById</a></li><li><a href="global.html#updatePermissionSchema">updatePermissionSchema</a></li><li><a href="global.html#updateProfile">updateProfile</a></li><li><a href="global.html#updatePronounsById">updatePronounsById</a></li><li><a href="global.html#updatePronounsSchema">updatePronounsSchema</a></li><li><a href="global.html#updatePublicationById">updatePublicationById</a></li><li><a href="global.html#updatePublicationSchema">updatePublicationSchema</a></li><li><a href="global.html#updateRoleById">updateRoleById</a></li><li><a href="global.html#updateRoleSchema">updateRoleSchema</a></li><li><a href="global.html#updateSubject">updateSubject</a></li><li><a href="global.html#updateSubjectSchema">updateSubjectSchema</a></li><li><a href="global.html#updateUserProfile">updateUserProfile</a></li><li><a href="global.html#updateWriter">updateWriter</a></li><li><a href="global.html#updateWriterSchema">updateWriterSchema</a></li><li><a href="global.html#updatedByAdminSchema">updatedByAdminSchema</a></li><li><a href="global.html#uploadFile">uploadFile</a></li><li><a href="global.html#urlSchema">urlSchema</a></li><li><a href="global.html#userBookHistorySchema">historySchema</a></li><li><a href="global.html#userIdSchema">userIdSchema</a></li><li><a href="global.html#userProfileController">userProfileController</a></li><li><a href="global.html#userRequestBooksSchema">requestedSchema</a></li><li><a href="global.html#userSchema">userSchema</a></li><li><a href="global.html#userSchemaBase">userSchemaBase</a></li><li><a href="global.html#usernameSchema">usernameSchema</a></li><li><a href="global.html#usersSchema">usersSchema</a></li><li><a href="global.html#validateAdminRequest">validateAdminRequest</a></li><li><a href="global.html#validateEmail">validateEmail</a></li><li><a href="global.html#validateEmails">validateEmails</a></li><li><a href="global.html#validateFile">validateFile</a></li><li><a href="global.html#validateIds">validateIds</a></li><li><a href="global.html#validatePassword">validatePassword</a></li><li><a href="global.html#validatePermission">validatePermission</a></li><li><a href="global.html#validatePermissionsChecksifallthespecifiedpermissionIDsexistinthedatabase.Thisfunctionisessentialforvalidatingpermissionsaspartofaccesscontrolmechanisms.ItretrievespermissiondocumentsfromthedatabasebasedontheprovidedIDsandcomparesthecountoffoundpermissionswiththecountofrequestedIDs.">validatePermissions
Checks if all the specified permission IDs exist in the database. This function is essential for validating permissions as part of access control mechanisms.
It retrieves permission documents from the database based on the provided IDs and compares the count of found permissions with the count of requested IDs.</a></li><li><a href="global.html#validateSubjectIds">validateSubjectIds</a></li><li><a href="global.html#validateUserRequest">validateUserRequest</a></li><li><a href="global.html#validateWithSchemaAmiddlewaregeneratorfunctionthatcreatesamiddlewaretovalidatespecifiedpropertiesoftherequestobjectagainstprovidedJoischemas.ItappliescustomvalidationmessagesandallowsconfigurationofJoivalidationoptions.Ifvalidationfails,itsendsaformattederrorresponse;otherwise,itsanitizesthedatabytypeconversionandproceedstothenextmiddleware.">validateWithSchema
A middleware generator function that creates a middleware to validate specified properties of the request object against provided Joi schemas.
It applies custom validation messages and allows configuration of Joi validation options. If validation fails, it sends a formatted error response; otherwise, it sanitizes the data by type conversion and proceeds to the next middleware.</a></li><li><a href="global.html#verify">verify</a></li><li><a href="global.html#verifyProcessesuseremailverificationusingatokenprovidedintherequestparameters.Itretrieveshostdataforlogging.">verify
Processes user email verification using a token provided in the request parameters. It retrieves host data for logging.</a></li><li><a href="global.html#verifyAdmin">verifyAdmin</a></li><li><a href="global.html#verifyAuthenticationToken">verifyAuthenticationToken</a></li><li><a href="global.html#verifyJwtToken">verifyJwtToken</a></li><li><a href="global.html#writerIdParamSchema">writerIdParamSchema</a></li><li><a href="global.html#writerIdsParamSchema">writerIdsParamSchema</a></li><li><a href="global.html#writerSchema">writerSchema</a></li><li><a href="global.html#writerSchemaBase">writerSchemaBase</a></li><li><a href="global.html#writersConstants">writersConstants</a></li><li><a href="global.html#writersSchema">writersSchema</a></li><li><a href="global.html#writersValidator">writersValidator</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Fri Aug 09 2024 01:55:05 GMT+0600 (Bangladesh Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
